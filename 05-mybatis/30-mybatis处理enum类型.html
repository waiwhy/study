<!DOCTYPE HTML><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>30-mybatis处理enum类型</title>
    
<style id="wiz_custom_css">html, body {font-size: 12pt;}body {font-family: Helvetica, 'Hiragino Sans GB', '微软雅黑', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;line-height: 1.6;margin: 0 auto;padding: 20px 16px;padding: 1.25rem 1rem;}h1, h2, h3, h4, h5, h6 {margin:20px 0 10px;margin:1.25rem 0 0.625rem;padding: 0;font-weight: bold;}h1 {font-size:20pt;font-size:1.67rem;}h2 {font-size:18pt;font-size:1.5rem;}h3 {font-size:15pt;font-size:1.25rem;}h4 {font-size:14pt;font-size:1.17rem;}h5 {font-size:12pt;font-size:1rem;}h6 {font-size:12pt;font-size:1rem;color: #777777;margin: 1rem 0;}div, p, ul, ol, dl, li {margin:0;}blockquote, table, pre, code {margin:8px 0;}ul, ol {padding-left:32px;padding-left:2rem;}ol.wiz-list-level1 > li {list-style-type:decimal;}ol.wiz-list-level2 > li {list-style-type:lower-latin;}ol.wiz-list-level3 > li {list-style-type:lower-roman;}blockquote {padding:0 12px;padding:0 0.75rem;}blockquote > :first-child {margin-top:0;}blockquote > :last-child {margin-bottom:0;}img {border:0;max-width:100%;height:auto !important;margin:2px 0;}table {border-collapse:collapse;border:1px solid #bbbbbb;}td, th {padding:4px 8px;border-collapse:collapse;border:1px solid #bbbbbb;min-height:28px;word-break:break-all;box-sizing: border-box;}.wiz-hide {display:none !important;}</style><style id="wiz_code_style">.wiz-code-container{position: relative; padding:8px 0; margin: 5px 25px 5px 5px;text-indent:0; text-align:left;}.CodeMirror {font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace; color: black; font-size: 10pt; font-size: 0.83rem}.CodeMirror-lines {padding: 4px 0;}.CodeMirror pre {padding: 0 4px;}.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {background-color: white;}.CodeMirror-gutters {border-right: 1px solid #ddd; background-color: #f7f7f7; white-space: nowrap;}.CodeMirror-linenumbers {}.CodeMirror-linenumber {padding: 0 3px 0 5px; min-width: 20px; text-align: right; color: #999; white-space: nowrap;}.CodeMirror-guttermarker {color: black;}.CodeMirror-guttermarker-subtle {color: #999;}.CodeMirror-cursor {border-left: 1px solid black; border-right: none; width: 0;}.CodeMirror div.CodeMirror-secondarycursor {border-left: 1px solid silver;}.cm-fat-cursor .CodeMirror-cursor {width: auto; border: 0 !important; background: #7e7;}.cm-fat-cursor div.CodeMirror-cursors {z-index: 1;}.cm-animate-fat-cursor {width: auto; border: 0; -webkit-animation: blink 1.06s steps(1) infinite; -moz-animation: blink 1.06s steps(1) infinite; animation: blink 1.06s steps(1) infinite; background-color: #7e7;}@-moz-keyframes blink {  0% {}  50% { background-color: transparent; }  100% {}}@-webkit-keyframes blink {  0% {}  50% { background-color: transparent; }  100% {}}@keyframes blink {  0% {}  50% { background-color: transparent; }  100% {}}.CodeMirror-overwrite .CodeMirror-cursor {}.cm-tab { display: inline-block; text-decoration: inherit; }.CodeMirror-rulers {position: absolute; left: 0; right: 0; top: -50px; bottom: -20px; overflow: hidden;}.CodeMirror-ruler {border-left: 1px solid #ccc; top: 0; bottom: 0; position: absolute;}.cm-s-default .cm-header {color: blue;}.cm-s-default .cm-quote {color: #090;}.cm-negative {color: #d44;}.cm-positive {color: #292;}.cm-header, .cm-strong {font-weight: bold;}.cm-em {font-style: italic;}.cm-link {text-decoration: underline;}.cm-strikethrough {text-decoration: line-through;}.cm-s-default .cm-keyword {color: #708;}.cm-s-default .cm-atom {color: #219;}.cm-s-default .cm-number {color: #164;}.cm-s-default .cm-def {color: #00f;}.cm-s-default .cm-variable,.cm-s-default .cm-punctuation,.cm-s-default .cm-property,.cm-s-default .cm-operator {}.cm-s-default .cm-variable-2 {color: #05a;}.cm-s-default .cm-variable-3 {color: #085;}.cm-s-default .cm-comment {color: #a50;}.cm-s-default .cm-string {color: #a11;}.cm-s-default .cm-string-2 {color: #f50;}.cm-s-default .cm-meta {color: #555;}.cm-s-default .cm-qualifier {color: #555;}.cm-s-default .cm-builtin {color: #30a;}.cm-s-default .cm-bracket {color: #997;}.cm-s-default .cm-tag {color: #170;}.cm-s-default .cm-attribute {color: #00c;}.cm-s-default .cm-hr {color: #999;}.cm-s-default .cm-link {color: #00c;}.cm-s-default .cm-error {color: #f00;}.cm-invalidchar {color: #f00;}.CodeMirror-composing { border-bottom: 2px solid; }div.CodeMirror span.CodeMirror-matchingbracket {color: #0f0;}div.CodeMirror span.CodeMirror-nonmatchingbracket {color: #f22;}.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }.CodeMirror-activeline-background {background: #e8f2ff;}.CodeMirror {position: relative; background: #f5f5f5;}.CodeMirror-scroll {overflow: hidden !important; margin-bottom: 0; margin-right: -30px; padding: 16px 30px 16px 0; outline: none; position: relative;}.CodeMirror-sizer {position: relative; border-right: 30px solid transparent;}.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {position: absolute; z-index: 6; display: none;}.CodeMirror-vscrollbar {right: 0; top: 0; overflow-x: hidden; overflow-y: scroll;}.CodeMirror-hscrollbar {bottom: 0; left: 0 !important; overflow-y: hidden; overflow-x: scroll;}.CodeMirror-scrollbar-filler {right: 0; bottom: 0;}.CodeMirror-gutter-filler {left: 0; bottom: 0;}.CodeMirror-gutters {position: absolute; left: 0; top: -5px; min-height: 100%; z-index: 3;}.CodeMirror-gutter {white-space: normal; height: inherit; display: inline-block; vertical-align: top; margin-bottom: -30px;}.CodeMirror-gutter-wrapper {position: absolute; z-index: 4; background: none !important; border: none !important;}.CodeMirror-gutter-background {position: absolute; top: 0; bottom: 0; z-index: 4;}.CodeMirror-gutter-elt {position: absolute; cursor: default; z-index: 4; text-align: center;}.CodeMirror-gutter-wrapper ::selection { background-color: transparent }.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }.CodeMirror-lines {cursor: text; min-height: 1px;}.CodeMirror pre {-moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0; border-width: 0; background: transparent; font-family: inherit; font-size: inherit; margin: 0; white-space: pre; word-wrap: normal; line-height: inherit; color: inherit; z-index: 2; position: relative; overflow: visible; -webkit-tap-highlight-color: transparent; -webkit-font-variant-ligatures: contextual; font-variant-ligatures: contextual;}.CodeMirror-wrap pre {word-wrap: break-word; white-space: pre-wrap; word-break: normal;}.CodeMirror-linebackground {position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: 0;}.CodeMirror-linewidget {position: relative; z-index: 2; overflow: auto;}.CodeMirror-widget {}.CodeMirror-rtl pre { direction: rtl; }.CodeMirror-code {outline: none;}.CodeMirror-scroll,.CodeMirror-sizer,.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber {-moz-box-sizing: content-box; box-sizing: content-box;}.CodeMirror-measure {position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden;}.CodeMirror-cursor {position: absolute; pointer-events: none;}.CodeMirror-measure pre { position: static; }div.CodeMirror-cursors {visibility: hidden; position: relative; z-index: 3;}div.CodeMirror-dragcursors {visibility: visible;}.CodeMirror-focused div.CodeMirror-cursors {visibility: visible;}.CodeMirror-selected { background: #d9d9d9; }.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }.CodeMirror-crosshair { cursor: crosshair; }.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }.cm-searching {background: #ffa; background: rgba(255, 255, 0, .4);}.cm-force-border { padding-right: .1px; }@media print {  .CodeMirror div.CodeMirror-cursors {visibility: hidden;}}.cm-tab-wrap-hack:after { content: ""; }span.CodeMirror-selectedtext { background: none; }.CodeMirror-activeline-background, .CodeMirror-selected {transition: visibility 0ms 100ms;}.CodeMirror-blur .CodeMirror-activeline-background, .CodeMirror-blur .CodeMirror-selected {visibility:hidden;}.CodeMirror-blur .CodeMirror-matchingbracket {color:inherit !important;outline:none !important;text-decoration:none !important;}</style></head>

<body class=""  spellcheck="false"><div></div><h1 class="csdn_top" style="margin:0px;font-size:1.5rem;font-family:&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun;font-weight:700;color:rgb(44, 48, 51);padding:0px 29px;font-style:normal;text-align:start;text-indent:0px;">mybatis处理enum类型</h1><div class="article_bar clearfix" style="margin:5px 0px 0px;padding:0px 29px 8px;font-weight:400;color:rgb(136, 136, 136);border-bottom:1px solid rgb(229, 229, 229);font-size:0.875rem;font-family:&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun;font-style:normal;text-align:start;text-indent:0px;"><div class="artical_tag" style="margin:0px;padding:0px;font-weight:400;"><br></div></div><div id="article_content" class="article_content csdn-tracking-statistics tracking-click" data-mod="popu_519" data-dsm="post" style="margin: 0px 0px 30px; padding: 20px 30px 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 1rem; font-style: normal; text-align: start; text-indent: 0px;"><p style="font-weight: 400; margin: 0px; padding: 0px;">一直用hibernate，习惯了枚举类的使用，非常方便，现在用mybatis，发现枚举的处理，还是需要单独处理下。</p><p style="margin: 0px; padding: 0px;">如果想使用mybatis自带的枚举类处理，有2种方式，一个是<span style="margin: 0px; padding: 0px;"><span data-wiz-span="data-wiz-span" style="color: rgb(255, 0, 0);"><b>EnumTypeHandler</b></span></span>，一个是<span style="margin: 0px; padding: 0px;"><b><span data-wiz-span="data-wiz-span" style="color: rgb(255, 0, 0);">EnumOrdinalTypeHandler</span></b></span>。<br>2者的区别是<span style="font-weight: 400; margin: 0px; padding: 0px;">EnumTypeHandler</span>直接存储name值，而<span style="font-weight: 400; margin: 0px; padding: 0px;">EnumOrdinalTypeHandler</span>会存储enum类里的序号值，此时数据库表字段一般用int类型的处理。</p><p style="font-weight: 400; margin: 0px; padding: 0px;">使用方式比较简单，直接在mapper文件里的字段上，加上</p><pre style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 0.813rem; display: block; padding: 0px; margin: 0px; color: rgb(51, 51, 51); border: 1px solid rgb(204, 204, 204); border-image-source: initial; border-image-slice: initial; border-image-width: initial; border-image-outset: initial; border-image-repeat: initial; border-radius: 4px; background-color: rgb(245, 245, 245);"><span data-wiz-span="data-wiz-span" style="font-size: 1rem;"><b>typeHandler="org.apache.ibatis.type.EnumOrdinalTypeHandler"</b></span></pre>或<pre style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 0.813rem; display: block; padding: 0px; margin: 0px; color: rgb(51, 51, 51); border: 1px solid rgb(204, 204, 204); border-image-source: initial; border-image-slice: initial; border-image-width: initial; border-image-outset: initial; border-image-repeat: initial; border-radius: 4px; background-color: rgb(245, 245, 245);"><span data-wiz-span="data-wiz-span" style="font-size: 1rem;"><b>typeHandler="org.apache.ibatis.type.EnumTypeHandler"</b></span></pre><p style="font-weight: 400; margin: 0px; padding: 0px;">然后insert或者update的地方，字段处也加上相应的typeHandler即可。</p><p style="font-weight: 400; margin: 0px; padding: 0px;"><br></p><p style="font-weight: 400; margin: 0px; padding: 0px;">但通常的情况下，我们并不希望用序号来标记，而希望通过自定义的id值来存储，这时我们就需要自己写enum的处理类。</p><p style="font-weight: 400; margin: 0px; padding: 0px;">为了使处理类通用，我们用泛型来处理，首先定义一个接口类：</p></div><div  data-mode="JavaScript" data-theme="default" id="wiz_cm_1514734823347_1240" class="wiz-code-container"><textarea style="display: none;">public interface IntEnum&lt;E extends Enum&lt;E&gt;&gt; {  
    int getIntValue();  
}  </textarea><wiz_code_mirror><div class="CodeMirror cm-s-default CodeMirror-wrap" data-id="wiz_cm_1514734823347_1240"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;" tabindex="0"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 71px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>3</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class=" wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 21px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class=" wiz-hide wiz_CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -30px; width: 30px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">public</span> <span class="cm-variable">interface</span> <span class="cm-variable">IntEnum</span><span class="cm-operator">&lt;</span><span class="cm-variable">E</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Enum</span><span class="cm-operator">&lt;</span><span class="cm-variable">E</span><span class="cm-operator">&gt;&gt;</span> { &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">int</span> <span class="cm-variable">getIntValue</span>(); &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} &nbsp;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 71px;"></div><div class="CodeMirror-gutters" style="height: 101px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div id="article_content" class="article_content csdn-tracking-statistics tracking-click" data-mod="popu_519" data-dsm="post" style="margin: 0px 0px 30px; padding: 20px 30px 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 1rem; font-style: normal; text-align: start; text-indent: 0px;"><br><p style="font-weight: 400; margin: 0px; padding: 0px;">然后自己的枚举类，去实现这个接口，主要是实现getIntValue方法：</p><div></div></div><div  data-mode="JavaScript" data-theme="default" id="wiz_cm_1514734823319_2600" class="wiz-code-container"><textarea style="display: none;">public enum TestStatusEnum implements IntEnum&lt;TestStatusEnum&gt; {  
    FAILURE(0, "failure"), SUCCESS(1, "success");  
    private int index;  
    private String name;  
  
//....get set  
    private TestStatusEnum(int index, String name) {  
        this.index = index;  
        this.name = name;  
    }  
  
    public static String fromIndex(int index) {  
        for (TestStatusEnump : TestStatusEnum.values()) {  
            if (index == p.getIndex())  
                return p.name;  
        }  
        return null;  
    }  
  
    @Override  
    public int getIntValue() {  
        return this.index;  
    }  </textarea><wiz_code_mirror><div class="CodeMirror cm-s-default CodeMirror-wrap" data-id="wiz_cm_1514734823319_2600"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;" tabindex="0"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 491px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>23</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class=" wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 21px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class=" wiz-hide wiz_CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -30px; width: 30px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">public</span> <span class="cm-variable">enum</span> <span class="cm-variable">TestStatusEnum</span> <span class="cm-variable">implements</span> <span class="cm-variable">IntEnum</span><span class="cm-operator">&lt;</span><span class="cm-variable">TestStatusEnum</span><span class="cm-operator">&gt;</span> { &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">FAILURE</span>(<span class="cm-number">0</span>, <span class="cm-string">"failure"</span>), <span class="cm-variable">SUCCESS</span>(<span class="cm-number">1</span>, <span class="cm-string">"success"</span>); &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">private</span> <span class="cm-variable">int</span> <span class="cm-variable">index</span>; &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">private</span> <span class="cm-variable">String</span> <span class="cm-variable">name</span>; &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//....get set &nbsp;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">private</span> <span class="cm-variable">TestStatusEnum</span>(<span class="cm-variable">int</span> <span class="cm-variable">index</span>, <span class="cm-variable">String</span> <span class="cm-variable">name</span>) { &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">index</span> <span class="cm-operator">=</span> <span class="cm-variable">index</span>; &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-variable">name</span>; &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">public</span> <span class="cm-variable">static</span> <span class="cm-variable">String</span> <span class="cm-variable">fromIndex</span>(<span class="cm-variable">int</span> <span class="cm-variable">index</span>) { &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable">TestStatusEnump</span> : <span class="cm-variable">TestStatusEnum</span>.<span class="cm-property">values</span>()) { &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">index</span> <span class="cm-operator">==</span> <span class="cm-variable">p</span>.<span class="cm-property">getIndex</span>()) &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">p</span>.<span class="cm-property">name</span>; &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">17</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">null</span>; &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">18</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">19</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">20</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">@</span><span class="cm-variable">Override</span> &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">21</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">public</span> <span class="cm-variable">int</span> <span class="cm-variable">getIntValue</span>() { &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">22</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">this</span>.<span class="cm-property">index</span>; &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">23</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } &nbsp;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 491px;"></div><div class="CodeMirror-gutters" style="height: 521px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div id="article_content" class="article_content csdn-tracking-statistics tracking-click" data-mod="popu_519" data-dsm="post" style="margin: 0px 0px 30px; padding: 20px 30px 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 1rem; font-style: normal; text-align: start; text-indent: 0px;">pojo类里的status字段属性，定义为 TestStatusEnum status。<p style="font-weight: 400; margin: 0px; padding: 0px;">然后自定义一个hanler类：</p><div></div></div><div  data-mode="JavaScript" data-theme="default" id="wiz_cm_1514734823266_1077" class="wiz-code-container"><textarea style="display: none;">public class IntEnumTypeHandler&lt;E extends Enum&lt;E&gt; &amp; IntEnum&lt;E&gt;&gt; extends BaseTypeHandler&lt;IntEnum&gt; {  
    private Class&lt;IntEnum&gt; type;  
  
    public IntEnumTypeHandler(Class&lt;IntEnum&gt; type) {  
        if (type == null)  
            throw new IllegalArgumentException("Type argument cannot be null");  
        this.type = type;  
    }  
  
    private IntEnum convert(int status) {  
        IntEnum[] objs = type.getEnumConstants();  
        for (IntEnum em : objs) {  
            if (em.getIntValue() == status) {  
                return em;  
            }  
        }  
        return null;  
    }  
  
    @Override  
    public IntEnum getNullableResult(ResultSet rs, String columnName)  
            throws SQLException {  
        return convert(rs.getInt(columnName));  
    }  
  
    @Override  
    public IntEnum getNullableResult(ResultSet rs, int columnIndex)  
            throws SQLException {  
        return convert(rs.getInt(columnIndex));  
    }  
  
    @Override  
    public IntEnum getNullableResult(CallableStatement cs, int columnIndex)  
            throws SQLException {  
        return convert(cs.getInt(columnIndex));  
    }  
  
    @Override  
    public void setNonNullParameter(PreparedStatement ps, int i,  
            IntEnum enumObj, JdbcType jdbcType) throws SQLException {  
        // baseTypeHandler已经帮我们做了parameter的null判断  
        ps.setInt(i, enumObj.getIntValue());  
  
    }  
}  </textarea><wiz_code_mirror><div class="CodeMirror cm-s-default CodeMirror-wrap" data-id="wiz_cm_1514734823266_1077"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;" tabindex="0"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 953px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>45</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class=" wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 21px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class=" wiz-hide wiz_CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -30px; width: 30px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">public</span> <span class="cm-keyword">class</span> <span class="cm-def">IntEnumTypeHandler</span><span class="cm-operator">&lt;</span><span class="cm-type">E</span> <span class="cm-keyword">extends</span> <span class="cm-type">Enum</span><span class="cm-operator">&lt;</span><span class="cm-type">E</span><span class="cm-operator">&gt;</span> <span class="cm-operator">&amp;</span> <span class="cm-variable">IntEnum</span><span class="cm-operator">&lt;</span><span class="cm-variable">E</span><span class="cm-operator">&gt;&gt;</span> <span class="cm-keyword">extends</span> <span class="cm-variable">BaseTypeHandler</span><span class="cm-operator">&lt;</span><span class="cm-variable">IntEnum</span><span class="cm-operator">&gt;</span> { &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">private</span> <span class="cm-variable">Class</span><span class="cm-operator">&lt;</span><span class="cm-variable">IntEnum</span><span class="cm-operator">&gt;</span> <span class="cm-variable">type</span>; &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">public</span> <span class="cm-variable">IntEnumTypeHandler</span>(<span class="cm-variable">Class</span><span class="cm-operator">&lt;</span><span class="cm-variable">IntEnum</span><span class="cm-operator">&gt;</span> <span class="cm-variable">type</span>) { &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">type</span> <span class="cm-operator">==</span> <span class="cm-atom">null</span>) &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">throw</span> <span class="cm-keyword">new</span> <span class="cm-variable">IllegalArgumentException</span>(<span class="cm-string">"Type argument cannot be null"</span>); &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">type</span> <span class="cm-operator">=</span> <span class="cm-variable">type</span>; &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">private</span> <span class="cm-variable">IntEnum</span> <span class="cm-variable">convert</span>(<span class="cm-variable">int</span> <span class="cm-variable">status</span>) { &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">IntEnum</span>[] <span class="cm-variable">objs</span> <span class="cm-operator">=</span> <span class="cm-variable">type</span>.<span class="cm-variable">getEnumConstants</span>(); &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable">IntEnum</span> <span class="cm-variable">em</span> : <span class="cm-variable">objs</span>) { &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">em</span>.<span class="cm-variable">getIntValue</span>() <span class="cm-operator">==</span> <span class="cm-variable">status</span>) { &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">em</span>; &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">17</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">null</span>; &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">18</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">19</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">20</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">@</span><span class="cm-variable">Override</span> &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">21</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">public</span> <span class="cm-variable">IntEnum</span> <span class="cm-variable">getNullableResult</span>(<span class="cm-variable">ResultSet</span> <span class="cm-variable">rs</span>, <span class="cm-variable">String</span> <span class="cm-variable">columnName</span>) &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">22</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">throws</span> <span class="cm-variable">SQLException</span> { &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">23</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">convert</span>(<span class="cm-variable">rs</span>.<span class="cm-variable">getInt</span>(<span class="cm-variable">columnName</span>)); &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">24</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">25</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">26</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">@</span><span class="cm-variable">Override</span> &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">27</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">public</span> <span class="cm-variable">IntEnum</span> <span class="cm-variable">getNullableResult</span>(<span class="cm-variable">ResultSet</span> <span class="cm-variable">rs</span>, <span class="cm-variable">int</span> <span class="cm-variable">columnIndex</span>) &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">28</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">throws</span> <span class="cm-variable">SQLException</span> { &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">29</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">convert</span>(<span class="cm-variable">rs</span>.<span class="cm-variable">getInt</span>(<span class="cm-variable">columnIndex</span>)); &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">30</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">31</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">32</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">@</span><span class="cm-variable">Override</span> &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">33</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">public</span> <span class="cm-variable">IntEnum</span> <span class="cm-variable">getNullableResult</span>(<span class="cm-variable">CallableStatement</span> <span class="cm-variable">cs</span>, <span class="cm-variable">int</span> <span class="cm-variable">columnIndex</span>) &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">34</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">throws</span> <span class="cm-variable">SQLException</span> { &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">35</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">convert</span>(<span class="cm-variable">cs</span>.<span class="cm-variable">getInt</span>(<span class="cm-variable">columnIndex</span>)); &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">36</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">37</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">38</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">@</span><span class="cm-variable">Override</span> &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">39</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">public</span> <span class="cm-variable">void</span> <span class="cm-variable">setNonNullParameter</span>(<span class="cm-variable">PreparedStatement</span> <span class="cm-variable">ps</span>, <span class="cm-variable">int</span> <span class="cm-variable">i</span>, &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">40</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">IntEnum</span> <span class="cm-variable">enumObj</span>, <span class="cm-variable">JdbcType</span> <span class="cm-variable">jdbcType</span>) <span class="cm-variable">throws</span> <span class="cm-variable">SQLException</span> { &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">41</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// baseTypeHandler已经帮我们做了parameter的null判断 &nbsp;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">42</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ps</span>.<span class="cm-variable">setInt</span>(<span class="cm-variable">i</span>, <span class="cm-variable">enumObj</span>.<span class="cm-variable">getIntValue</span>()); &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">43</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">44</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } &nbsp;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">45</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} &nbsp;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 953px;"></div><div class="CodeMirror-gutters" style="height: 983px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div id="article_content" class="article_content csdn-tracking-statistics tracking-click" data-mod="popu_519" data-dsm="post" style="margin: 0px 0px 30px; padding: 20px 30px 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 1rem; font-style: normal; text-align: start; text-indent: 0px;"><br><p style="font-weight: 400; margin: 0px; padding: 0px;">在mapper文件里，加上typehandler的定义，比如：<br>&lt;result column="status" property="status"&nbsp;&nbsp;jdbcType="BIT" typeHandler="com.**.IntEnumTypeHandler" /&gt;<br>insert和update的地方，同样加上#{condition.status,jdbcType=BIT,typeHandler=com.**.IntEnumTypeHandler}</p><p style="font-weight: 400; margin: 0px; padding: 0px;">最后测试下，insert后，表里会存储对应的id值，select的时候，mybatis会自动获取name值。</p><p style="font-weight: 400; margin: 0px; padding: 0px;"><br></p><p style="font-weight: 400; margin: 0px; padding: 0px;">另外有个问题是，当使用了enum类型后，mybatis查询，是获取到的enum对象。比如我们enum里，有name属性，我们在转换到json的时候，想直接获取这个name属性<span style="font-size: 1rem; line-height: 1.6;">，就可以使用fastjson来转，最新版本的json已经支持读取enum的toString方法来序列化。</span></p><p style="font-weight: 400; margin: 0px; padding: 0px;">代码：<br>JSON.DEFFAULT_DATE_FORMAT = "yyyy-MM-dd HH:mm:ss";<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String objJson = JSON.toJSONString(results,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;SerializerFeature.WriteDateUseDateFormat,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;SerializerFeature.WriteEnumUsingToString);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;jsonObject.put("results", objJson);<br></p><div style="font-weight: 400; margin: 0px; padding: 0px;"><br></div><div style="font-weight: 400; color: gray;"><small>来源：&nbsp;<a href="http://blog.csdn.net/china_bobo/article/details/42423809">http://blog.csdn.net/china_bobo/article/details/42423809</a></small></div><hr><h1 class="csdn_top" style="margin:0px;font-size:1.5rem;font-family:&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun;font-weight:700;color:rgb(44, 48, 51);padding:0px 29px;font-style:normal;text-align:start;text-indent:0px;">Mybatis下基于注解的Enum类型直接存储与读写</h1><div class="article_bar clearfix" style="margin:5px 0px 0px;padding:0px 29px 8px;font-weight:400;color:rgb(136, 136, 136);border-bottom:1px solid rgb(229, 229, 229);font-size:0.875rem;font-family:&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun;font-style:normal;text-align:start;text-indent:0px;"><div class="artical_tag" style="margin:0px;padding:0px;font-weight:400;"><span class="original" style="margin:0px 20px 0px 0px;padding:2px 6px;font-weight:400;border:1px solid rgb(228, 235, 244);font-size:0.875rem;color:rgb(120, 144, 156);">原创<span>&nbsp;</span></span><span class="time" style="margin:0px;padding:0px;font-weight:400;display:inline-block;color:rgb(187, 187, 187);font-size:0.875rem;">2016年11月13日 12:02:12</span></div><ul class="article_tags clearfix csdn-tracking-statistics tracking-click" data-mod="popu_377" style="margin:0px 0px 0px 26px;padding:0px;font-weight:400;list-style:none;background-color:rgb(255, 255, 255);font-size:0.875rem;"><li class="tit" style="margin:0px;padding:0px;font-weight:400;list-style:none;color:rgb(187, 187, 187);">标签：</li><li style="margin:0px;padding:0px;font-weight:400;list-style:none;"><a href="http://so.csdn.net/so/search/s.do?q=mybatis&amp;t=blog" target="_blank" style="color:rgb(64, 147, 198);text-decoration:none;margin:0px;padding:0px;font-weight:400;display:inline-block;">mybatis</a><span>&nbsp;</span><span style="margin:0px 10px 0px 5px;padding:0px;font-weight:400;color:rgb(229, 229, 229);display:inline-block;">/</span></li><li style="margin:0px;padding:0px;font-weight:400;list-style:none;"><a href="http://so.csdn.net/so/search/s.do?q=enum&amp;t=blog" target="_blank" style="color:rgb(64, 147, 198);text-decoration:none;margin:0px;padding:0px;font-weight:400;display:inline-block;">enum</a></li></ul><ul class="right_bar" style="margin:5px 0px 0px;padding:0px;font-weight:400;list-style:none;"><li style="margin:0px 0px 0px 30px;padding:0px;font-weight:400;list-style:none;"><button class="btn-noborder" style="margin:0px;font-size:0.875rem;border:0px;padding:0px;font-weight:400;display:inline-block;text-align:center;background:rgba(0, 0, 0, 0);color:rgb(136, 136, 136);"><i class="icon iconfont icon-read" style="font-style:normal;font-size:1rem;font-family:iconfont !important;display:inline-block;margin-right:8px;color:rgb(187, 187, 187);"></i><span class="txt" style="margin:0px;padding:0px;font-weight:400;color:rgb(187, 187, 187);display:inline-block;">2959</span></button></li></ul></div><div id="article_content" class="article_content csdn-tracking-statistics tracking-click" data-mod="popu_519" data-dsm="post" style="margin:0px 0px 30px;padding:20px 30px 0px;font-weight:400;color:rgb(69, 69, 69);font-family:&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun;font-size:1rem;font-style:normal;text-align:start;text-indent:0px;"><div class="markdown_views" style="margin:0px;padding:0px;font-weight:400;font-family:&quot;microsoft yahei&quot;font-size:1rem;color:rgb(63, 63, 63);"><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;">Mybatis下基于注解的Enum类型直接存储与读写</p><h2 id="背景知识" style="font-weight:100;margin:0.8em 0px;font-size:2.15rem;padding:0px;text-align:start;"><a name="t0" style="color:rgb(79, 161, 219);text-decoration:none;margin:0px;padding:0px;font-weight:400;"></a>背景知识</h2><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;">做业务时，有些常见属性会存成Enum类型，便于代码复用，比如性别male，female，other，nolimit。当这些属性需要存储到DB中时，我们可能会为Enum指定code，name这样的属性，再将code按照int，name按照varchar存储。读写的时候再进行转换。</p><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;">实际上，mybatis默认的handler中已经提供了不同的解决方案，便于我们直接读写。</p><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;">mybatis默认提供了两种Enum类型的handler，<code style="font-family:&quot;Source Code Pro&quot;, monospace;font-size:0.9rem;padding:2px 4px;color:rgb(63, 63, 63);background-color:rgba(128, 128, 128, 0.075);border-radius:0px;">EnumTypeHandler</code>和<code style="font-family:&quot;Source Code Pro&quot;, monospace;font-size:0.9rem;padding:2px 4px;color:rgb(63, 63, 63);background-color:rgba(128, 128, 128, 0.075);border-radius:0px;">EnumOrdinalTypeHandler</code>。</p><ul style="margin:0px 0px 1.7em;padding:0px;font-weight:400;list-style:disc;"><li style="margin:0px 0px 0px 40px;padding:0px;font-weight:400;list-style:disc;display:list-item;">EnumTypeHandler是将Enum按照String处理，存储为varchar</li><li style="margin:0px 0px 0px 40px;padding:0px;font-weight:400;list-style:disc;display:list-item;">EnumOrdinalTypeHandler是将Enum按照int处理，存储为int(smallint,tinyint也可)</li></ul><h2 id="示例代码" style="font-weight:100;margin:0.8em 0px;font-size:2.15rem;padding:0px;text-align:start;"><a name="t1" style="color:rgb(79, 161, 219);text-decoration:none;margin:0px;padding:0px;font-weight:400;"></a>示例代码</h2><h3 id="enum类" style="font-weight:100;margin:0.8em 0px;font-size:1.7rem;padding:0px;text-align:start;"><a name="t2" style="color:rgb(79, 161, 219);text-decoration:none;margin:0px;padding:0px;font-weight:400;"></a>Enum类</h3><br><div style="color:gray;"><small>来源：&nbsp;<a href="http://blog.csdn.net/TCXP_for_wife/article/details/53148232">http://blog.csdn.net/TCXP_for_wife/article/details/53148232</a></small></div></div></div></div><div data-mode="Java"  data-theme="default" id="wiz_cm_1514734823254_776" class="wiz-code-container"><textarea style="display: none;">    public enum Gender{
        male,
        female,
        other,
        umlimit
    }</textarea><wiz_code_mirror><div class="CodeMirror cm-s-default CodeMirror-wrap" data-id="wiz_cm_1514734823254_776"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;" tabindex="0"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 134px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>6</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class=" wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 21px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class=" wiz-hide wiz_CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -30px; width: 30px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">enum</span> <span class="cm-def">Gender</span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">male</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">female</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">other</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">umlimit</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 134px;"></div><div class="CodeMirror-gutters" style="height: 164px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div id="article_content" class="article_content csdn-tracking-statistics tracking-click" data-mod="popu_519" data-dsm="post" style="margin: 0px 0px 30px; padding: 20px 30px 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 1rem; font-style: normal; text-align: start; text-indent: 0px;"><div id="article_content" class="article_content csdn-tracking-statistics tracking-click" data-mod="popu_519" data-dsm="post" style="margin:0px 0px 30px;padding:20px 30px 0px;font-weight:400;color:rgb(69, 69, 69);font-family:&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun;font-size:1rem;font-style:normal;text-align:start;text-indent:0px;"><div class="markdown_views" style="margin:0px;padding:0px;font-weight:400;font-family:&quot;microsoft yahei&quot;font-size:1rem;color:rgb(63, 63, 63);"><h3 id="entity类" style="font-weight:100;margin:0.8em 0px;font-size:1.7rem;padding:0px;text-align:start;"><a name="t3" style="color:rgb(79, 161, 219);text-decoration:none;margin:0px;padding:0px;font-weight:400;"></a>Entity类</h3><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;">Entity中应该将对应的Filed直接设成Enum。</p></div></div></div><div data-mode="Java"  data-theme="default" id="wiz_cm_1514734823233_9124" class="wiz-code-container"><textarea style="display: none;">    @Table(name = "t_people_info")
    public class PeopleInfo{
        ...
        @Id
        @GeneratedValue(strategy = GenerationType.IDENTITY)
        private Long id;

        @Column(name = "gender")
        private Gender gender;

        public Gender getGender(){return gender;}
        public void setGender(Gender gender){this.gender = gender;}
        ...
    }</textarea><wiz_code_mirror><div class="CodeMirror cm-s-default CodeMirror-wrap" data-id="wiz_cm_1514734823233_9124"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;" tabindex="0"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 302px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>14</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class=" wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 21px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class=" wiz-hide wiz_CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -30px; width: 30px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Table</span>(<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-string">"t_people_info"</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">PeopleInfo</span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  ...</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Id</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@GeneratedValue</span>(<span class="cm-variable">strategy</span> <span class="cm-operator">=</span> <span class="cm-variable">GenerationType</span>.<span class="cm-variable">IDENTITY</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-type">Long</span> <span class="cm-variable">id</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text=""></span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Column</span>(<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-string">"gender"</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">Gender</span> <span class="cm-variable">gender</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text=""></span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">Gender</span> <span class="cm-variable">getGender</span>(){<span class="cm-keyword">return</span> <span class="cm-variable">gender</span>;}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-type">void</span> <span class="cm-variable">setGender</span>(<span class="cm-variable">Gender</span> <span class="cm-variable">gender</span>){<span class="cm-keyword">this</span>.<span class="cm-variable">gender</span> <span class="cm-operator">=</span> <span class="cm-variable">gender</span>;}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  ...</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 302px;"></div><div class="CodeMirror-gutters" style="height: 332px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div id="article_content" class="article_content csdn-tracking-statistics tracking-click" data-mod="popu_519" data-dsm="post" style="margin: 0px 0px 30px; padding: 20px 30px 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 1rem; font-style: normal; text-align: start; text-indent: 0px;"><div id="article_content" class="article_content csdn-tracking-statistics tracking-click" data-mod="popu_519" data-dsm="post" style="margin:0px 0px 30px;padding:20px 30px 0px;font-weight:400;color:rgb(69, 69, 69);font-family:&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun;font-size:1rem;font-style:normal;text-align:start;text-indent:0px;"><div class="markdown_views" style="margin:0px;padding:0px;font-weight:400;font-family:&quot;microsoft yahei&quot;font-size:1rem;color:rgb(63, 63, 63);"><h3 id="mapper类" style="font-weight:100;margin:0.8em 0px;font-size:1.7rem;padding:0px;text-align:start;"><a name="t4" style="color:rgb(79, 161, 219);text-decoration:none;margin:0px;padding:0px;font-weight:400;"></a>Mapper类</h3></div></div></div><div data-mode="Java"  data-theme="default" id="wiz_cm_1514734823213_7730" class="wiz-code-container"><textarea style="display: none;">    public interface PeopleInfoMapper{
        @Insert("INSERT INTO people_info (gender,,...) VALUES (#{gender,javaType=com.aerexu.test.Gender,jdbcType=VARCHAR},....) ")
        int insertPeopleInfo(@Param("gender") Gender gender,...);

        @Select("SELECT (id,gender,...) WHERE id=#{id}")
        @Results(value = {
            @Result(column = "id", property = "id", jdbcType = JdbcType.BIGINT, javaType = Long.class),
            @Result(column = "gender", property = "gender",jdbcType = JdbcType.VARCHAR, javaType = Gender.class)
        })
        PeopleInfo selectPeopleInfo(@Param("id") long id);
    }</textarea><wiz_code_mirror><div class="CodeMirror cm-s-default CodeMirror-wrap" data-id="wiz_cm_1514734823213_7730"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;" tabindex="0"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 239px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>11</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class=" wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 21px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class=" wiz-hide wiz_CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -30px; width: 30px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">interface</span> <span class="cm-def">PeopleInfoMapper</span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Insert</span>(<span class="cm-string">"INSERT INTO people_info (gender,,...) VALUES (#{gender,javaType=com.aerexu.test.Gender,jdbcType=VARCHAR},....) "</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-type">int</span> <span class="cm-variable">insertPeopleInfo</span>(<span class="cm-meta">@Param</span>(<span class="cm-string">"gender"</span>) <span class="cm-variable">Gender</span> <span class="cm-variable">gender</span>,...);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text=""></span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Select</span>(<span class="cm-string">"SELECT (id,gender,...) WHERE id=#{id}"</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Results</span>(<span class="cm-variable">value</span> <span class="cm-operator">=</span> {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Result</span>(<span class="cm-variable">column</span> <span class="cm-operator">=</span> <span class="cm-string">"id"</span>, <span class="cm-variable">property</span> <span class="cm-operator">=</span> <span class="cm-string">"id"</span>, <span class="cm-variable">jdbcType</span> <span class="cm-operator">=</span> <span class="cm-variable">JdbcType</span>.<span class="cm-variable">BIGINT</span>, <span class="cm-variable">javaType</span> <span class="cm-operator">=</span> <span class="cm-type">Long</span>.<span class="cm-keyword">class</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Result</span>(<span class="cm-variable">column</span> <span class="cm-operator">=</span> <span class="cm-string">"gender"</span>, <span class="cm-variable">property</span> <span class="cm-operator">=</span> <span class="cm-string">"gender"</span>,<span class="cm-variable">jdbcType</span> <span class="cm-operator">=</span> <span class="cm-variable">JdbcType</span>.<span class="cm-variable">VARCHAR</span>, <span class="cm-variable">javaType</span> <span class="cm-operator">=</span> <span class="cm-variable">Gender</span>.<span class="cm-keyword">class</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  })</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">PeopleInfo</span> <span class="cm-variable">selectPeopleInfo</span>(<span class="cm-meta">@Param</span>(<span class="cm-string">"id"</span>) <span class="cm-type">long</span> <span class="cm-variable">id</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 239px;"></div><div class="CodeMirror-gutters" style="height: 269px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div id="article_content" class="article_content csdn-tracking-statistics tracking-click" data-mod="popu_519" data-dsm="post" style="margin: 0px 0px 30px; padding: 20px 30px 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 1rem; font-style: normal; text-align: start; text-indent: 0px;"><div id="article_content" class="article_content csdn-tracking-statistics tracking-click" data-mod="popu_519" data-dsm="post" style="margin:0px 0px 30px;padding:20px 30px 0px;font-weight:400;color:rgb(69, 69, 69);font-family:&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun;font-size:1rem;font-style:normal;text-align:start;text-indent:0px;"><div class="markdown_views" style="margin:0px;padding:0px;font-weight:400;font-family:&quot;microsoft yahei&quot;font-size:1rem;color:rgb(63, 63, 63);"><h3 id="handler注册" style="font-weight:100;margin:0.8em 0px;font-size:1.7rem;padding:0px;text-align:start;"><a name="t5" style="color:rgb(79, 161, 219);text-decoration:none;margin:0px;padding:0px;font-weight:400;"></a>Handler注册</h3><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;">声明和定义好相关的类和接口之后，需要将Handler和定义的Enum对应起来，需要在<code style="font-family:&quot;Source Code Pro&quot;, monospace;font-size:0.9rem;padding:2px 4px;color:rgb(63, 63, 63);background-color:rgba(128, 128, 128, 0.075);border-radius:0px;">SqlSessionFactory</code>中进行注册。</p></div></div></div><div data-mode="Java"  data-theme="default" id="wiz_cm_1514734823197_770" class="wiz-code-container"><textarea style="display: none;">    @PostConstruct
    @Autowired
    private void specialTypeHandlerRegistry(SqlSessionFactory sqlSessionFactory) {
        TypeHandlerRegistry typeHandlerRegistry = sqlSessionFactory.getConfiguration().getTypeHandlerRegistry();
        typeHandlerRegistry.register(Gender.class, JdbcType.VARCHAR, EnumTypeHandler.class);
    }</textarea><wiz_code_mirror><div class="CodeMirror cm-s-default CodeMirror-wrap" data-id="wiz_cm_1514734823197_770"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;" tabindex="0"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 134px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>6</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class=" wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 21px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class=" wiz-hide wiz_CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -30px; width: 30px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@PostConstruct</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Autowired</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-type">void</span> <span class="cm-def">specialTypeHandlerRegistry</span>(<span class="cm-variable">SqlSessionFactory</span> <span class="cm-variable">sqlSessionFactory</span>) {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">TypeHandlerRegistry</span> <span class="cm-variable">typeHandlerRegistry</span> <span class="cm-operator">=</span> <span class="cm-variable">sqlSessionFactory</span>.<span class="cm-variable">getConfiguration</span>().<span class="cm-variable">getTypeHandlerRegistry</span>();</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">typeHandlerRegistry</span>.<span class="cm-variable">register</span>(<span class="cm-variable">Gender</span>.<span class="cm-keyword">class</span>, <span class="cm-variable">JdbcType</span>.<span class="cm-variable">VARCHAR</span>, <span class="cm-variable">EnumTypeHandler</span>.<span class="cm-keyword">class</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 13px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 134px;"></div><div class="CodeMirror-gutters" style="height: 164px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div id="article_content" class="article_content csdn-tracking-statistics tracking-click" data-mod="popu_519" data-dsm="post" style="margin: 0px 0px 30px; padding: 20px 30px 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 1rem; font-style: normal; text-align: start; text-indent: 0px;"><div id="article_content" class="article_content csdn-tracking-statistics tracking-click" data-mod="popu_519" data-dsm="post" style="margin:0px 0px 30px;padding:20px 30px 0px;font-weight:400;color:rgb(69, 69, 69);font-family:&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun;font-size:1rem;font-style:normal;text-align:start;text-indent:0px;"><div class="markdown_views" style="margin:0px;padding:0px;font-weight:400;font-family:&quot;microsoft yahei&quot;font-size:1rem;color:rgb(63, 63, 63);"><h3 id="替换为enumordinaltypehandler" style="font-weight:100;margin:0.8em 0px;font-size:1.7rem;padding:0px;text-align:start;"><a name="t6" style="color:rgb(79, 161, 219);text-decoration:none;margin:0px;padding:0px;font-weight:400;"></a>替换为EnumOrdinalTypeHandler</h3><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;">如果想让Enum在数据库中存储的是数字而不是字符串，仅需将上述的<code style="font-family:&quot;Source Code Pro&quot;, monospace;font-size:0.9rem;padding:2px 4px;color:rgb(63, 63, 63);background-color:rgba(128, 128, 128, 0.075);border-radius:0px;">JdbcType.VARCHAR</code>替换为<code style="font-family:&quot;Source Code Pro&quot;, monospace;font-size:0.9rem;padding:2px 4px;color:rgb(63, 63, 63);background-color:rgba(128, 128, 128, 0.075);border-radius:0px;">JdbcType.TINYINT</code>，并将<code style="font-family:&quot;Source Code Pro&quot;, monospace;font-size:0.9rem;padding:2px 4px;color:rgb(63, 63, 63);background-color:rgba(128, 128, 128, 0.075);border-radius:0px;">EnumTypeHandler.class</code>替换为<code style="font-family:&quot;Source Code Pro&quot;, monospace;font-size:0.9rem;padding:2px 4px;color:rgb(63, 63, 63);background-color:rgba(128, 128, 128, 0.075);border-radius:0px;">EnumOrdinalTypeHandler.class</code></p><h2 id="extra" style="font-weight:100;margin:0.8em 0px;font-size:2.15rem;padding:0px;text-align:start;"><a name="t7" style="color:rgb(79, 161, 219);text-decoration:none;margin:0px;padding:0px;font-weight:400;"></a>Extra</h2><h3 id="java中enum类" style="font-weight:100;margin:0.8em 0px;font-size:1.7rem;padding:0px;text-align:start;"><a name="t8" style="color:rgb(79, 161, 219);text-decoration:none;margin:0px;padding:0px;font-weight:400;"></a>Java中Enum类</h3><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;">Enum是默认提供了<code style="font-family:&quot;Source Code Pro&quot;, monospace;font-size:0.9rem;padding:2px 4px;color:rgb(63, 63, 63);background-color:rgba(128, 128, 128, 0.075);border-radius:0px;">name()</code>和<code style="font-family:&quot;Source Code Pro&quot;, monospace;font-size:0.9rem;padding:2px 4px;color:rgb(63, 63, 63);background-color:rgba(128, 128, 128, 0.075);border-radius:0px;">ordinal()</code>两个方法的，分别对应了Enum示例的名字（声明的全小写）和顺序（从0开始计数）。Mybatis的Enum默认的handler分别对应这两种情形。</p><h3 id="mybatis的handler注册" style="font-weight:100;margin:0.8em 0px;font-size:1.7rem;padding:0px;text-align:start;"><a name="t9" style="color:rgb(79, 161, 219);text-decoration:none;margin:0px;padding:0px;font-weight:400;"></a>Mybatis的handler注册</h3><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;">Mybatis在读取数据进行javaType和jdbcType的转换时，是各个预先映射好的handler处理的。映射信息存储在<code style="font-family:&quot;Source Code Pro&quot;, monospace;font-size:0.9rem;padding:2px 4px;color:rgb(63, 63, 63);background-color:rgba(128, 128, 128, 0.075);border-radius:0px;">TypeHandlerRegistry</code>类的TYPE_HANDLER_MAP中，其定义为<code style="font-family:&quot;Source Code Pro&quot;, monospace;font-size:0.9rem;padding:2px 4px;color:rgb(63, 63, 63);background-color:rgba(128, 128, 128, 0.075);border-radius:0px;">Map&lt;Type, Map&lt;JdbcType, TypeHandler&lt;?&gt;&gt;&gt;</code>。可见，Typehandler是javaType和jdbcType唯一映射的。当有一些自己定义的javaType或者Typehandler时，mybatis并不会初始化映射关系，必须由代码主动注册。</p></div></div></div></body></html>