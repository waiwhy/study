<!DOCTYPE HTML><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>000-不可以在controller上陪切面?</title>
    
<style id="wiz_custom_css">html, body {font-size: 12pt;}body {font-family: Helvetica, 'Hiragino Sans GB', '微软雅黑', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;line-height: 1.6;margin: 0 auto;padding: 20px 16px;padding: 1.25rem 1rem;}h1, h2, h3, h4, h5, h6 {margin:20px 0 10px;margin:1.25rem 0 0.625rem;padding: 0;font-weight: bold;}h1 {font-size:20pt;font-size:1.67rem;}h2 {font-size:18pt;font-size:1.5rem;}h3 {font-size:15pt;font-size:1.25rem;}h4 {font-size:14pt;font-size:1.17rem;}h5 {font-size:12pt;font-size:1rem;}h6 {font-size:12pt;font-size:1rem;color: #777777;margin: 1rem 0;}div, p, ul, ol, dl, li {margin:0;}blockquote, table, pre, code {margin:8px 0;}ul, ol {padding-left:32px;padding-left:2rem;}ol.wiz-list-level1 > li {list-style-type:decimal;}ol.wiz-list-level2 > li {list-style-type:lower-latin;}ol.wiz-list-level3 > li {list-style-type:lower-roman;}blockquote {padding:0 12px;padding:0 0.75rem;}blockquote > :first-child {margin-top:0;}blockquote > :last-child {margin-bottom:0;}img {border:0;max-width:100%;height:auto !important;margin:2px 0;}table {border-collapse:collapse;border:1px solid #bbbbbb;}td, th {padding:4px 8px;border-collapse:collapse;border:1px solid #bbbbbb;min-height:28px;word-break:break-all;box-sizing: border-box;}.wiz-hide {display:none !important;}</style></head>

<body class=""  spellcheck="false"><div>java.lang.IllegalStateException: No MethodInvocation found: Check that an AOP invocation is in progress, and that the ExposeInvocationInterceptor is upfront in the interceptor chain. Specifically, note that advices with order HIGHEST_PRECEDENCE will execute before ExposeInvocationInterceptor!<br></div><div>&nbsp; &nbsp; at org.springframework.aop.interceptor.ExposeInvocationInterceptor.currentInvocation(ExposeInvocationInterceptor.java:73)<br></div><div>&nbsp; &nbsp; at org.springframework.aop.aspectj.AbstractAspectJAdvice.getJoinPointMatch(AbstractAspectJAdvice.java:643)<br></div><div>&nbsp; &nbsp; at org.springframework.aop.aspectj.AspectJMethodBeforeAdvice.before(AspectJMethodBeforeAdvice.java:41)<br></div><div>&nbsp; &nbsp; at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:51)<br></div><div>&nbsp; &nbsp; at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)<br></div><div>&nbsp; &nbsp; at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:655)<br></div><div>&nbsp; &nbsp; at top.qiaojianyong.dt_ssh.controller.SysLoginController$$EnhancerBySpringCGLIB$$566230d7.captcha(&lt;generated&gt;)<br></div><div>&nbsp; &nbsp; at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br></div><div>&nbsp; &nbsp; at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)<br></div><div>&nbsp; &nbsp; at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br></div><div>&nbsp; &nbsp; at java.lang.reflect.Method.invoke(Method.java:497)<br></div><div>&nbsp; &nbsp; at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)<br></div><div>&nbsp; &nbsp; at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)<br></div><div>&nbsp; &nbsp; at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)<br></div><div>&nbsp; &nbsp; at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:832)<br></div><div>&nbsp; &nbsp; at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:743)<br></div><div>&nbsp; &nbsp; at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)<br></div><div>&nbsp; &nbsp; at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:961)<br></div><div>&nbsp; &nbsp; at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:895)<br></div><div>&nbsp; &nbsp; at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)<br></div><div>&nbsp; &nbsp; at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:858)<br></div><div>&nbsp; &nbsp; at javax.servlet.http.HttpServlet.service(HttpServlet.java:618)<br></div><div>&nbsp; &nbsp; at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)<br></div><div>&nbsp; &nbsp; at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:301)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br></div><div>&nbsp; &nbsp; at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br></div><div>&nbsp; &nbsp; at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:83)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br></div><div>&nbsp; &nbsp; at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)<br></div><div>&nbsp; &nbsp; at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)<br></div><div>&nbsp; &nbsp; at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)<br></div><div>&nbsp; &nbsp; at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)<br></div><div>&nbsp; &nbsp; at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)<br></div><div>&nbsp; &nbsp; at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)<br></div><div>&nbsp; &nbsp; at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)<br></div><div>&nbsp; &nbsp; at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)<br></div><div>&nbsp; &nbsp; at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)<br></div><div>&nbsp; &nbsp; at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)<br></div><div>&nbsp; &nbsp; at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)<br></div><div>&nbsp; &nbsp; at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)<br></div><div>&nbsp; &nbsp; at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)<br></div><div>&nbsp; &nbsp; at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br></div><div>&nbsp; &nbsp; at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:121)<br></div><div>&nbsp; &nbsp; at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:503)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:136)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:74)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:610)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)<br></div><div>&nbsp; &nbsp; at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:526)<br></div><div>&nbsp; &nbsp; at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1017)<br></div><div>&nbsp; &nbsp; at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:652)<br></div><div>&nbsp; &nbsp; at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:222)<br></div><div>&nbsp; &nbsp; at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1575)<br></div><div>&nbsp; &nbsp; at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1533)<br></div><div>&nbsp; &nbsp; at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)<br></div><div>&nbsp; &nbsp; at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)<br></div><div>&nbsp; &nbsp; at java.lang.Thread.run(Thread.java:745)<br></div><div><hr><br></div><div><br></div><div><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:1.28rem;"><span style="color:#e8bf6a;">&lt;?</span><span style="color:#bababa;">xml version</span><span style="color:#6a8759;">="1.0" </span><span style="color:#bababa;">encoding</span><span style="color:#6a8759;">="UTF-8"</span><span style="color:#e8bf6a;">?&gt;<br></span><span style="color:#e8bf6a;">&lt;beans </span><span style="color:#bababa;">xmlns</span><span style="color:#6a8759;">="http://www.springframework.org/schema/beans"<br></span><span style="color:#6a8759;">       </span><span style="color:#bababa;">xmlns:</span><span style="color:#9876aa;">xsi</span><span style="color:#6a8759;">="http://www.w3.org/2001/XMLSchema-instance"<br></span><span style="color:#6a8759;">       </span><span style="color:#bababa;">xmlns:</span><span style="color:#9876aa;">aop</span><span style="color:#6a8759;">="http://www.springframework.org/schema/aop"<br></span><span style="color:#6a8759;">       </span><span style="color:#9876aa;">xsi</span><span style="color:#bababa;">:schemaLocation</span><span style="color:#6a8759;">="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<br></span><span style="color:#6a8759;">      http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd"</span><span style="color:#e8bf6a;">&gt;<br></span><span style="color:#e8bf6a;"><br></span><span style="color:#e8bf6a;"><br></span><span style="color:#e8bf6a;">  </span><span style="color:#808080;">&lt;!-- </span><span style="color:#808080;font-family:'Courier New';">通知对象 一系列的代理操作</span><span style="color:#808080;">(</span><span style="color:#808080;font-family:'Courier New';">附加操作</span><span style="color:#808080;">) --&gt;<br></span><span style="color:#808080;">  </span><span style="color:#e8bf6a;">&lt;bean </span><span style="color:#bababa;">name</span><span style="color:#6a8759;">="sysLogAspect" </span><span style="color:#bababa;">class</span><span style="color:#6a8759;">="top.qiaojianyong.dt_ssh.aop.SysLogAspect"</span><span style="color:#e8bf6a;">/&gt;<br></span><span style="color:#e8bf6a;"><br></span><span style="color:#e8bf6a;">  </span><span style="color:#808080;">&lt;!-- &lt;aop:aspectj-autoproxy proxy-target-class="true" /&gt; --&gt;<br></span><span style="color:#808080;">  &lt;!-- </span><span style="color:#808080;font-family:'Courier New';">将通知对象织入目标对象 </span><span style="color:#808080;">--&gt;<br></span><span style="color:#808080;">  </span><span style="color:#e8bf6a;">&lt;</span><span style="color:#9876aa;">aop</span><span style="color:#e8bf6a;">:config&gt;<br></span><span style="color:#e8bf6a;">    </span><span style="color:#808080;">&lt;!-- </span><span style="color:#808080;font-family:'Courier New';">选择切入点</span><span style="color:#808080;">(</span><span style="color:#808080;font-family:'Courier New';">有这个注解的地方</span><span style="color:#808080;">) expression="execution(* top.qiaojianyong.dt_ssh.service..*.*(..))"--&gt;<br></span><span style="color:#808080;">    </span><span style="color:#e8bf6a;">&lt;</span><span style="color:#9876aa;">aop</span><span style="color:#e8bf6a;">:pointcut </span><span style="color:#bababa;">expression</span><span style="color:#6a8759;">="@annotation(top.qiaojianyong.dt_ssh.annotation.MyLog)" </span><span style="color:#bababa;">id</span><span style="color:#6a8759;">="logPointcut"</span><span style="color:#e8bf6a;">/&gt;<br></span><span style="color:#e8bf6a;">    &lt;</span><span style="color:#9876aa;">aop</span><span style="color:#e8bf6a;">:pointcut </span><span style="color:#bababa;">expression</span><span style="color:#6a8759;">="execution(* top.qiaojianyong.dt_ssh.controller.*.*(..))" </span><span style="color:#bababa;">id</span><span style="color:#6a8759;">="controllerPointcut"</span><span style="color:#e8bf6a;">/&gt;<br></span><span style="color:#e8bf6a;"><br></span><span style="color:#e8bf6a;">    &lt;</span><span style="color:#9876aa;">aop</span><span style="color:#e8bf6a;">:aspect </span><span style="color:#bababa;">ref</span><span style="color:#6a8759;">="sysLogAspect"</span><span style="color:#e8bf6a;">&gt;<br></span><span style="color:#e8bf6a;">      </span><span style="color:#808080;">&lt;!--&lt;aop:before method="saveSysLog" pointcut-ref="logPointcut"/&gt;--&gt;<br></span><span style="color:#808080;">      </span><span style="color:#e8bf6a;">&lt;</span><span style="color:#9876aa;">aop</span><span style="color:#e8bf6a;">:before </span><span style="color:#bababa;">method</span><span style="color:#6a8759;">="saveSysLog" </span><span style="color:#bababa;">pointcut-ref</span><span style="color:#6a8759;">="controllerPointcut"</span><span style="color:#e8bf6a;">/&gt;<br></span><span style="color:#e8bf6a;">    &lt;/</span><span style="color:#9876aa;">aop</span><span style="color:#e8bf6a;">:aspect&gt;<br></span><span style="color:#e8bf6a;">  &lt;/</span><span style="color:#9876aa;">aop</span><span style="color:#e8bf6a;">:config&gt;<br></span><span style="color:#e8bf6a;"><br></span><span style="color:#e8bf6a;">&lt;/beans&gt;<br></span></pre><br></div></body></html>