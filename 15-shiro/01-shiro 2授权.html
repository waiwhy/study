<!DOCTYPE HTML><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>01-shiro 2授权</title>
    
<style id="wiz_custom_css">html, body {font-size: 12pt;}body {font-family: Helvetica, 'Hiragino Sans GB', '微软雅黑', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;line-height: 1.6;margin: 0 auto;padding: 20px 16px;padding: 1.25rem 1rem;}h1, h2, h3, h4, h5, h6 {margin:20px 0 10px;margin:1.25rem 0 0.625rem;padding: 0;font-weight: bold;}h1 {font-size:20pt;font-size:1.67rem;}h2 {font-size:18pt;font-size:1.5rem;}h3 {font-size:15pt;font-size:1.25rem;}h4 {font-size:14pt;font-size:1.17rem;}h5 {font-size:12pt;font-size:1rem;}h6 {font-size:12pt;font-size:1rem;color: #777777;margin: 1rem 0;}div, p, ul, ol, dl, li {margin:0;}blockquote, table, pre, code {margin:8px 0;}ul, ol {padding-left:32px;padding-left:2rem;}ol.wiz-list-level1 > li {list-style-type:decimal;}ol.wiz-list-level2 > li {list-style-type:lower-latin;}ol.wiz-list-level3 > li {list-style-type:lower-roman;}blockquote {padding:0 12px;padding:0 0.75rem;}blockquote > :first-child {margin-top:0;}blockquote > :last-child {margin-bottom:0;}img {border:0;max-width:100%;height:auto !important;margin:2px 0;}table {border-collapse:collapse;border:1px solid #bbbbbb;}td, th {padding:4px 8px;border-collapse:collapse;border:1px solid #bbbbbb;min-height:28px;word-break:break-all;box-sizing: border-box;}.wiz-hide {display:none !important;}</style></head>

<body class=""  spellcheck="false"><div></div><h2 class="md-end-block md-heading" style="font-size:1.75rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;padding-bottom:0.3em;border-bottom:1px solid rgb(238, 238, 238);color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>授权</span></h2><pre class="md-fences mock-cm md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;">• 授权，也叫访问控制，即在应用中控制谁访问哪些资源（如访问页面/编辑数据/页面操作等）。在授权中需了解的几个关键对象：主体（Subject）、资源（Resource）、权限（Permission）、角色（Role）。<br><br></pre><pre class="md-fences mock-cm md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;">• 主体(Subject)：访问应用的用户，在 Shiro 中使用 Subject 代表该用户。用户只有授权后才允许访问相应的资源。<br><br></pre><pre class="md-fences mock-cm md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;">• 资源(Resource)：在应用中用户可以访问的 URL，比如访问 JSP 页面、查看/编辑某些数据、访问某个业务方法、打印文本等等都是资源。用户只要授权后才能访问。<br><br></pre><pre class="md-fences mock-cm md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;">• 权限(Permission)：安全策略中的原子授权单位，通过权限我们可以表示在应用中用户有没有操作某个资源的权力。即权限表示在应用中用户能不能访问某个资源，如：访问用户列表页面查看/新增/修改/删除用户数据（即很多时候都是CRUD（增查改删）式权限控制）等。权限代表了用户有没有操作某个资源的权利，即反映在某个资源上的操作允不允许。<br><br></pre><pre class="md-fences mock-cm md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;">• Shiro 支持粗粒度权限（如用户模块的所有权限）和细粒度权限（操作某个用户的权限，即实例级别的）<br><br></pre><pre class="md-fences mock-cm md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;">• 角色(Role)：权限的集合，一般情况下会赋予用户角色而不是权限，即这样用户可以拥有一组权限，赋予权限时比较方便。典型的如：项目经理、技术总监、CTO、开发工程师等都是角色，不同的角色拥有一组不同的权限。<br><br></pre><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>授权方式</span></h3><pre class="md-fences mock-cm md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;">• Shiro 支持三种方式的授权：
– 编程式：通过写if/else 授权代码块完成
– 注解式：通过在执行的Java方法上放置相应的注解完成，没有权限将抛出相应的异常
– JSP/GSP 标签：在JSP/GSP 页面通过相应的标签完成<br><br></pre><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"><span data-src="mdpic/14.bmp" class="md-image md-img-loaded" style="font-family:monospace;display:inline-block;width:690.51px;text-align:center;"><img src="01-shiro 2授权_files/14.bmp" style="box-sizing: border-box; border-width: 0px 4px 0px 2px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: initial; border-left-color: transparent; border-image: initial; vertical-align: middle; max-width: 100%; cursor: default;"></span></span><h2 class="md-end-block md-heading" style="font-size:1.75rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;padding-bottom:0.3em;border-bottom:1px solid rgb(238, 238, 238);color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>默认拦截器</span></h2><pre class="md-fences mock-cm md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;">• Shiro 内置了很多默认的拦截器，比如身份验证、授权等相关的。默认拦截器可以参考org.apache.shiro.web.filter.mgt.DefaultFilter中的枚举<br><br></pre><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>拦截器：</span></h3><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"><span data-src="mdpic/15.bmp" class="md-image md-img-loaded" style="font-family:monospace;display:inline-block;width:690.51px;text-align:center;"><img src="01-shiro 2授权_files/15.bmp" style="box-sizing: border-box; border-width: 0px 4px 0px 2px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: initial; border-left-color: transparent; border-image: initial; vertical-align: middle; max-width: 100%; cursor: default;"></span></span><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>身份验证相关的</span></h3><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"><span data-src="mdpic/16.bmp" class="md-image md-img-loaded" style="font-family:monospace;display:inline-block;width:690.51px;text-align:center;"><img src="01-shiro 2授权_files/16.bmp" style="box-sizing: border-box; border-width: 0px 4px 0px 2px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: initial; border-left-color: transparent; border-image: initial; vertical-align: middle; max-width: 100%; cursor: default;"></span></span><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>授权相关的</span></h3><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"><span data-src="mdpic/17.bmp" class="md-image md-img-loaded" style="font-family:monospace;display:inline-block;width:690.51px;text-align:center;"><img src="01-shiro 2授权_files/17.bmp" style="box-sizing: border-box; border-width: 0px 4px 0px 2px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: initial; border-left-color: transparent; border-image: initial; vertical-align: middle; max-width: 100%; cursor: default;"></span></span><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>其他</span></h3><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"><span data-src="mdpic/18.bmp" class="md-image md-img-loaded" style="font-family:monospace;display:inline-block;width:690.51px;text-align:center;"><img src="01-shiro 2授权_files/18.bmp" style="box-sizing: border-box; border-width: 0px 4px 0px 2px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: initial; border-left-color: transparent; border-image: initial; vertical-align: middle; max-width: 100%; cursor: default;"></span></span><h2 class="md-end-block md-heading" style="font-size:1.75rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;padding-bottom:0.3em;border-bottom:1px solid rgb(238, 238, 238);color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>Permissions</span></h2><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>规则：资源标识符</span><span>操作：</span></h3><pre class="md-fences mock-cm md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;">对象实例 ID 即对哪个资源的哪个实例可以进行什么操作. 其默认支持通配符权限字符串，: 表示资源/操作/实例的分割；, 表示操作的分割，* 表示任意资源/操作/实例。<br><br></pre><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>多层次管理：</span></h3><pre class="md-fences mock-cm md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;">– 例如：user:query、user:edit
– 冒号是一个特殊字符，它用来分隔权限字符串的下一部件：第一部分是权限被操作的领域（打印机），第二部分是被执行的操作。
– 多个值：每个部件能够保护多个值。因此，除了授予用户 user:query和 user:edit 权限外，也可以简单地授予他们一个：user:query, edit
– 还可以用 * 号代替所有的值，如：user:* ， 也可以写：*:query，表示某个用户在所有的领域都有 query 的权限<br><br></pre><h2 class="md-end-block md-heading" style="font-size:1.75rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;padding-bottom:0.3em;border-bottom:1px solid rgb(238, 238, 238);color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>Shiro 的 Permissions</span></h2><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>实例级访问控制</span></h3><pre class="md-fences mock-cm md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;">– 这种情况通常会使用三个部件：域、操作、被付诸实施的实例。如：user:edit:manager
– 也可以使用通配符来定义，如：user:edit:*、user:*:*、 user:*:manager
– 部分省略通配符：缺少的部件意味着用户可以访问所有与之匹配的值，比如：user:edit 等价于 user:edit :*、user 等价于 user:*:*
– 注意：通配符只能从字符串的结尾处省略部件，也就是说 user:edit 并不等价于 user:*:edit<br><br></pre><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"></span></p><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><h2 class="md-end-block md-heading" style="font-size:1.75rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;padding-bottom:0.3em;border-bottom:1px solid rgb(238, 238, 238);color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>授权流程</span></h2><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"><span data-src="mdpic/19.bmp" class="md-image md-img-loaded" style="font-family:monospace;display:inline-block;width:690.51px;text-align:center;"><img src="01-shiro 2授权_files/19.bmp" style="box-sizing: border-box; border-width: 0px 4px 0px 2px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: initial; border-left-color: transparent; border-image: initial; vertical-align: middle; max-width: 100%; cursor: default;"></span></span><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>流程如下：</span></h3><pre class="md-fences mock-cm md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;">• 1、首先调用 Subject.isPermitted*/hasRole* 接口，其会委托给SecurityManager，而 SecurityManager 接着会委托给 Authorizer；<br><br></pre><pre class="md-fences mock-cm md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;">• 2、Authorizer是真正的授权者，如果调用如isPermitted(“user:view”)，其首先会通过 PermissionResolver 把字符串转换成相应的 Permission 实例；<br><br></pre><pre class="md-fences mock-cm md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;">• 3、在进行授权之前，其会调用相应的 Realm 获取 Subject 相应的角色/权限用于匹配传入的角色/权限；<br><br></pre><pre class="md-fences mock-cm md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;">• 4、Authorizer 会判断 Realm 的角色/权限是否和传入的匹配，如果有多个Realm，会委托给 ModularRealmAuthorizer 进行循环判断，
如果匹配如 isPermitted*/hasRole* 会返回true，否则返回false表示授权失败。<br><br></pre><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>ModularRealmAuthorizer</span></h3><pre class="md-fences mock-cm md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;">• ModularRealmAuthorizer 进行多 Realm 匹配流程：
– 1、首先检查相应的 Realm 是否实现了实现了Authorizer；
– 2、如果实现了 Authorizer，那么接着调用其相应的isPermitted*/hasRole* 接口进行匹配；
– 3、如果有一个Realm匹配那么将返回 true，否则返回 false。<br><br></pre><h2 class="md-end-block md-heading" style="font-size:1.75rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;padding-bottom:0.3em;border-bottom:1px solid rgb(238, 238, 238);color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>Shiro 标签</span></h2><pre class="md-fences md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;"><span></span><br><span style="padding-right:0.1px;">• Shiro 提供了 JSTL 标签用于在 JSP 页面进行权限控制，如根据登录用户显示相应的页面按钮。</span></pre><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>guest 标签：用户没有身份验证时显示相应信息，即游客访问信息：</span></h3><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"><span data-src="mdpic/20.bmp" class="md-image md-img-loaded" style="font-family:monospace;display:inline-block;width:690.51px;text-align:center;"><img src="01-shiro 2授权_files/20.bmp" style="box-sizing: border-box; border-width: 0px 4px 0px 2px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: initial; border-left-color: transparent; border-image: initial; vertical-align: middle; max-width: 100%; cursor: default;"></span></span><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>user 标签：</span></h3><pre class="md-fences md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;"><span></span><br><span style="padding-right:0.1px;">用户已经经过认证/记住我登录后显示相应的信息。</span></pre><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"><span data-src="mdpic/21.bmp" class="md-image md-img-loaded" style="font-family:monospace;display:inline-block;width:690.51px;text-align:center;"><img src="01-shiro 2授权_files/21.bmp" style="box-sizing: border-box; border-width: 0px 4px 0px 2px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: initial; border-left-color: transparent; border-image: initial; vertical-align: middle; max-width: 100%; cursor: default;"></span></span><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>authenticated 标签：用户已经身份验证通过，即</span></h3><pre class="md-fences md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;"><span></span><br><span style="padding-right:0.1px;">Subject.login登录成功，不是记住我登录的</span></pre><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"><span data-src="mdpic/22.bmp" class="md-image md-img-loaded" style="font-family:monospace;display:inline-block;width:690.51px;text-align:center;"><img src="01-shiro 2授权_files/22.bmp" style="box-sizing: border-box; border-width: 0px 4px 0px 2px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: initial; border-left-color: transparent; border-image: initial; vertical-align: middle; max-width: 100%; cursor: default;"></span></span><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>notAuthenticated 标签：</span></h3><pre class="md-fences md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;"><span></span><br><span style="padding-right:0.1px;">用户未进行身份验证，即没有调用Subject.login进行登录，包括记住我自动登录的也属于未进行身份验证。</span></pre><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"><span data-src="mdpic/23.bmp" class="md-image md-img-loaded" style="font-family:monospace;display:inline-block;width:690.51px;text-align:center;"><img src="01-shiro 2授权_files/23.bmp" style="box-sizing: border-box; border-width: 0px 4px 0px 2px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: initial; border-left-color: transparent; border-image: initial; vertical-align: middle; max-width: 100%; cursor: default;"></span></span><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>pincipal 标签：</span></h3><pre class="md-fences md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;"><span></span><br><span style="padding-right:0.1px;">显示用户身份信息，默认调用</span><br><span style="padding-right:0.1px;">Subject.getPrincipal() 获取，即 Primary Principal。</span></pre><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"><span data-src="mdpic/24.bmp" class="md-image md-img-loaded" style="font-family:monospace;display:inline-block;width:690.51px;text-align:center;"><img src="01-shiro 2授权_files/24.bmp" style="box-sizing: border-box; border-width: 0px 4px 0px 2px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: initial; border-left-color: transparent; border-image: initial; vertical-align: middle; max-width: 100%; cursor: default;"></span></span><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>hasRole 标签：</span></h3><pre class="md-fences md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;"><span></span><br><span style="padding-right:0.1px;">如果当前 Subject 有角色将显示 body 体内容：</span></pre><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"><span data-src="mdpic/25.bmp" class="md-image md-img-loaded" style="font-family:monospace;display:inline-block;width:690.51px;text-align:center;"><img src="01-shiro 2授权_files/25.bmp" style="box-sizing: border-box; border-width: 0px 4px 0px 2px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: initial; border-left-color: transparent; border-image: initial; vertical-align: middle; max-width: 100%; cursor: default;"></span></span><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>hasAnyRoles 标签：</span></h3><pre class="md-fences md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;"><span></span><br><span style="padding-right:0.1px;">如果当前Subject有任意一个角色（或的关系）将显示body体内容。</span></pre><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"><span data-src="mdpic/26.bmp" class="md-image md-img-loaded" style="font-family:monospace;display:inline-block;width:690.51px;text-align:center;"><img src="01-shiro 2授权_files/26.bmp" style="box-sizing: border-box; border-width: 0px 4px 0px 2px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: initial; border-left-color: transparent; border-image: initial; vertical-align: middle; max-width: 100%; cursor: default;"></span></span><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>lacksRole：</span></h3><pre class="md-fences md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;"><span></span><br><span style="padding-right:0.1px;">如果当前 Subject 没有角色将显示 body 体内容</span></pre><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"><span data-src="mdpic/27.bmp" class="md-image md-img-loaded" style="font-family:monospace;display:inline-block;width:690.51px;text-align:center;"><img src="01-shiro 2授权_files/27.bmp" style="box-sizing: border-box; border-width: 0px 4px 0px 2px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: initial; border-left-color: transparent; border-image: initial; vertical-align: middle; max-width: 100%; cursor: default;"></span></span><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>hasPermission：</span></h3><pre class="md-fences md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;"><span></span><br><span style="padding-right:0.1px;">如果当前 Subject 有权限将显示 body 体内容</span></pre><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"><span data-src="mdpic/28.bmp" class="md-image md-img-loaded" style="font-family:monospace;display:inline-block;width:690.51px;text-align:center;"><img src="01-shiro 2授权_files/28.bmp" style="box-sizing: border-box; border-width: 0px 4px 0px 2px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: initial; border-left-color: transparent; border-image: initial; vertical-align: middle; max-width: 100%; cursor: default;"></span></span><h3 class="md-end-block md-heading" style="font-size:1.5rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>lacksPermission：</span></h3><pre class="md-fences md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;"><span></span><br><span style="padding-right:0.1px;">如果当前Subject没有权限将显示body体内容。</span></pre><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="md-line md-end-block" style="display:block;"><span data-src="mdpic/29.bmp" class="md-image md-img-loaded" style="font-family:monospace;display:inline-block;width:690.51px;text-align:center;"><img src="01-shiro 2授权_files/29.bmp" style="box-sizing: border-box; border-width: 0px 4px 0px 2px; border-top-style: initial; border-right-style: solid; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: initial; border-left-color: transparent; border-image: initial; vertical-align: middle; max-width: 100%; cursor: default;"></span></span><h2 class="md-end-block md-heading" style="font-size:1.75rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;padding-bottom:0.3em;border-bottom:1px solid rgb(238, 238, 238);color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>权限注解</span></h2><pre class="md-fences md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;"><span></span><br><span style="padding-right:0.1px;">• @RequiresAuthentication：表示当前Subject已经通过login 进行了身份验证；即 Subject. isAuthenticated() 返回 true</span></pre><pre class="md-fences md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;"><span></span><br><span style="padding-right:0.1px;">• @RequiresUser：表示当前 Subject 已经身份验证或者通过记住我登录的。</span></pre><pre class="md-fences md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;"><span></span><br><span style="padding-right:0.1px;">• @RequiresGuest：表示当前Subject没有身份验证或通过记住我登录过，即是游客身份。</span></pre><pre class="md-fences md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;"><span></span><br><span style="padding-right:0.1px;">• @RequiresRoles(value={“admin”, “user”}, logical= Logical.AND)：表示当前 Subject 需要角色 admin 和user</span></pre><pre class="md-fences md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;"><span></span><br><span style="padding-right:0.1px;">• @RequiresPermissions (value={“user:a”, “user:b”}, logical= Logical.OR)：表示当前 Subject 需要权限 user:a 或</span><br><span style="padding-right:0.1px;">user:b。</span></pre><h2 class="md-end-block md-heading" style="font-size:1.75rem;margin-top:1rem;margin-bottom:1rem;font-weight:bold;padding-bottom:0.3em;border-bottom:1px solid rgb(238, 238, 238);color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:normal;text-align:start;text-indent:0px;"><span>自定义拦截器</span></h2><pre class="md-fences md-end-block" style="font-family:Consolas, &quot;Liberation Mono&quot;, Courier, monospace;font-size:0.9rem;display:block;text-align:left;background-position:var(--code-block-bg-color);background-repeat:var(--code-block-bg-color);background-color:rgb(248, 248, 248);border:1px solid rgb(221, 221, 221);border-radius:3px;padding:8px 1em 6px;margin-bottom:15px;margin-top:15px;color:rgb(51, 51, 51);font-style:normal;font-weight:normal;text-indent:0px;"><span></span><br><span style="padding-right:0.1px;">• 通过自定义拦截器可以扩展功能，例如：动态url-角色/权限访问控制的实现、根据 Subject 身份信息获取用户信息绑定到 Request（即设置通用数据）、验证码验证、在线用户信息的保存等</span></pre><p style="margin:0.8em 0px;color:rgb(51, 51, 51);font-family:&quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:1.333rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><br class="Apple-interchange-newline"></p></p></p></p></p></p></p></p></p></p></p></p><span></span></p></p></p></p></p></p><span></span></p></body></html>