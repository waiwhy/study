<!DOCTYPE HTML><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>09-shiro-02经典权限五张表</title>
    
<style id="wiz_custom_css">html, body {font-size: 12pt;}body {font-family: Helvetica, 'Hiragino Sans GB', '微软雅黑', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;line-height: 1.6;margin: 0 auto;padding: 20px 16px;padding: 1.25rem 1rem;}h1, h2, h3, h4, h5, h6 {margin:20px 0 10px;margin:1.25rem 0 0.625rem;padding: 0;font-weight: bold;}h1 {font-size:20pt;font-size:1.67rem;}h2 {font-size:18pt;font-size:1.5rem;}h3 {font-size:15pt;font-size:1.25rem;}h4 {font-size:14pt;font-size:1.17rem;}h5 {font-size:12pt;font-size:1rem;}h6 {font-size:12pt;font-size:1rem;color: #777777;margin: 1rem 0;}div, p, ul, ol, dl, li {margin:0;}blockquote, table, pre, code {margin:8px 0;}ul, ol {padding-left:32px;padding-left:2rem;}ol.wiz-list-level1 > li {list-style-type:decimal;}ol.wiz-list-level2 > li {list-style-type:lower-latin;}ol.wiz-list-level3 > li {list-style-type:lower-roman;}blockquote {padding:0 12px;padding:0 0.75rem;}blockquote > :first-child {margin-top:0;}blockquote > :last-child {margin-bottom:0;}img {border:0;max-width:100%;height:auto !important;margin:2px 0;}table {border-collapse:collapse;border:1px solid #bbbbbb;}td, th {padding:4px 8px;border-collapse:collapse;border:1px solid #bbbbbb;min-height:28px;word-break:break-all;box-sizing: border-box;}.wiz-hide {display:none !important;}</style></head>

<body class="" spellcheck="false" ><div></div><h1 class="csdn_top" style="margin:0px;font-size:1.5rem;font-family:'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun;font-weight:700;color:rgb(44, 48, 51);padding:0px 29px;font-style:normal;text-align:start;text-indent:0px;">shiro-02经典权限五张表</h1><div class="article_bar clearfix" style="margin:5px 0px 0px;padding:0px 29px 8px;font-weight:normal;color:rgb(136, 136, 136);border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(229, 229, 229);font-size:0.875rem;font-family:'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun;font-style:normal;text-align:start;text-indent:0px;"><div class="artical_tag" style="margin:0px;padding:0px;font-weight:400;"><span class="original" style="margin:0px 20px 0px 0px;padding:2px 6px;font-weight:400;border:1px solid rgb(228, 235, 244);font-size:0.875rem;color:rgb(120, 144, 156);">转载<span class="Apple-converted-space">&nbsp;</span></span><span class="time" style="margin:0px;padding:0px;font-weight:400;display:inline-block;color:rgb(187, 187, 187);font-size:0.875rem;">2017年12月05日 20:36:24</span></div><ul class="article_tags clearfix csdn-tracking-statistics" data-mod="popu_377" style="margin:0px 0px 0px 26px;padding:0px;font-weight:400;list-style:none;font-size:0.875rem;background-color:rgb(255, 255, 255);"><li class="tit" style="margin:0px;padding:0px;font-weight:400;list-style:none;color:rgb(187, 187, 187);">标签：</li><li style="margin:0px;padding:0px;font-weight:400;list-style:none;"><a href="http://so.csdn.net/so/search/s.do?q=shiro&amp;t=blog" target="_blank" style="color:rgb(64, 147, 198);text-decoration:none;margin:0px;padding:0px;font-weight:400;display:inline-block;">shiro</a><span class="Apple-converted-space">&nbsp;</span><span style="margin:0px 10px 0px 5px;padding:0px;font-weight:400;color:rgb(229, 229, 229);display:inline-block;">/</span></li><li style="margin:0px;padding:0px;font-weight:400;list-style:none;"><a href="http://so.csdn.net/so/search/s.do?q=%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86&amp;t=blog" target="_blank" style="color:rgb(64, 147, 198);text-decoration:none;margin:0px;padding:0px;font-weight:400;display:inline-block;">权限管理</a><span class="Apple-converted-space">&nbsp;</span><span style="margin:0px 10px 0px 5px;padding:0px;font-weight:400;color:rgb(229, 229, 229);display:inline-block;">/</span></li><li style="margin:0px;padding:0px;font-weight:400;list-style:none;"><a href="http://so.csdn.net/so/search/s.do?q=%E4%BA%94%E5%BC%A0%E8%A1%A8&amp;t=blog" target="_blank" style="color:rgb(64, 147, 198);text-decoration:none;margin:0px;padding:0px;font-weight:400;display:inline-block;">五张表</a></li></ul><ul class="right_bar" style="margin:5px 0px 0px;padding:0px;font-weight:400;list-style:none;"><li style="margin:0px 0px 0px 30px;padding:0px;font-weight:400;list-style:none;"><button class="btn-noborder" style="margin:0px;font-size:0.875rem;border:0px;padding:0px;font-weight:400;display:inline-block;text-align:center;color:rgb(136, 136, 136);background:rgba(0, 0, 0, 0);"><i class="icon iconfont icon-read" style="font-style:normal;font-size:1rem;font-family:iconfont !important;display:inline-block;margin-right:8px;color:rgb(187, 187, 187);"></i><span class="txt" style="margin:0px;padding:0px;font-weight:400;color:rgb(187, 187, 187);display:inline-block;">10</span></button></li></ul></div><div id="article_content" class="article_content csdn-tracking-statistics" data-mod="popu_519" data-dsm="post" style="margin:0px 0px 30px;padding:20px 30px 0px;font-weight:normal;color:rgb(69, 69, 69);font-family:'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun;font-size:1rem;font-style:normal;text-align:start;text-indent:0px;"><div class="markdown_views" style="margin:0px;padding:0px;font-weight:400;font-family:'microsoft yahei';font-size:1rem;color:rgb(63, 63, 63);"><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;"><strong style="font-weight:bold;">注:</strong><span class="Apple-converted-space">&nbsp;</span><br> 所有shiro使用方法都是围绕springrain项目进行的. 具体的springrain项目demo可以在之前的博客中找到.</p><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;">经典权限五张表指的是:<span class="Apple-converted-space">&nbsp;</span><br> ①用户表<span class="Apple-converted-space">&nbsp;</span><br> ②用户-角色表<span class="Apple-converted-space">&nbsp;</span><br> ③角色表<span class="Apple-converted-space">&nbsp;</span><br> ④角色权限表<span class="Apple-converted-space">&nbsp;</span><br> ⑤权限表</p><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;">ER图:<span class="Apple-converted-space">&nbsp;</span><br><img src="09-shiro-02经典权限五张表_files/0.7015116910352164.png" alt="这里写图片描述" title="" style="border:0px;margin-top:15px;margin-bottom:15px;"></p><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;"> t_org是部门表,考虑到员工兼职,所以有t_user_org 中间表.</p><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;"> t_menu是菜单表,字段 type 是标示是菜单资源还是普通资源 菜单资源的意义就是导航菜单,会显示到左侧导航,普通资源就是菜单内的按钮或者提交路径,这个时候 pid的意义就比较重要了,pid就是上级菜单的id,对于页面普通资源来说,就是相应的导航菜单的url,这样在管理界面能够树形显示出来.</p><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;"> 用户正常登陆后,根据用户的角色查询角色拥有的菜单权限,通过树形菜单显示导航,示例效果图如下:<span class="Apple-converted-space">&nbsp;</span><br><img src="09-shiro-02经典权限五张表_files/0.2606091862736837.png" alt="这里写图片描述" title="" style="border:0px;margin-top:15px;margin-bottom:15px;"></p><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;"> 每个菜单下一般拥有增删改查导入导出等普通资源,这些也是有权限控制的,后台分配权限示例如下图:<span class="Apple-converted-space">&nbsp;</span><br><img src="09-shiro-02经典权限五张表_files/0.9439364642041408.png" alt="这里写图片描述" title="" style="border:0px;margin-top:15px;margin-bottom:15px;"></p><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;"> 图中 博客管理 是一个导航菜单,其中包含删除博客等动作的普通资源url. 通过 t_menu表中 type 字段进行标示菜单资源或者普通资源,pid字段标示这些普通资源属于 博客管理 这个菜单下.</p><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;"> 删除,批量删除等其实就是前台操作的按钮,通过shiro的标签,可以控制按钮是否显示,shiro官方提供了jstl的标签库,springrain是使用了freemarker标签.</p><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;"> 以博客管理为例代码截图如下:<span class="Apple-converted-space">&nbsp;</span><br><img src="09-shiro-02经典权限五张表_files/0.4846196649778802.png" alt="这里写图片描述" title="" style="border:0px;margin-top:15px;margin-bottom:15px;"></p><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;"> 就此 就能灵活分配和管理每个操作的权限.</p><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;"> 对于通用的url拦截权限来说,这几张表足够用了.</p><hr style="margin:2em 0px;border-width:1px 0px 0px;border-top-style:solid;border-top-color:rgba(128, 128, 128, 0.0980392);"><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;">出自weicms.net。</p><p style="margin:0px 0px 1.7em;padding:0px;font-weight:400;">永久链接:<span class="Apple-converted-space">&nbsp;</span><a href="http://www.weicms.net/2013/12/11/springrain2-basetable.html" target="_blank" style="color:rgb(202, 12, 22);text-decoration:none;margin:0px;padding:0px;font-weight:400;">http://www.weicms.net/2013/12/11/springrain2-basetable.html</a></p></div><br><div style="color:gray;"><small>来源：&nbsp;<a href="http://blog.csdn.net/lx_nhs/article/details/78724580">http://blog.csdn.net/lx_nhs/article/details/78724580</a></small></div></div></body></html>