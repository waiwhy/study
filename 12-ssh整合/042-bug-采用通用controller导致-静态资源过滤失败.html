<!DOCTYPE HTML><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>042-bug-采用通用controller导致-静态资源过滤失败</title>
    
<style id="wiz_custom_css">html, body {font-size: 12pt;}body {font-family: Helvetica, 'Hiragino Sans GB', '微软雅黑', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;line-height: 1.6;margin: 0 auto;padding: 20px 16px;padding: 1.25rem 1rem;}h1, h2, h3, h4, h5, h6 {margin:20px 0 10px;margin:1.25rem 0 0.625rem;padding: 0;font-weight: bold;}h1 {font-size:20pt;font-size:1.67rem;}h2 {font-size:18pt;font-size:1.5rem;}h3 {font-size:15pt;font-size:1.25rem;}h4 {font-size:14pt;font-size:1.17rem;}h5 {font-size:12pt;font-size:1rem;}h6 {font-size:12pt;font-size:1rem;color: #777777;margin: 1rem 0;}div, p, ul, ol, dl, li {margin:0;}blockquote, table, pre, code {margin:8px 0;}ul, ol {padding-left:32px;padding-left:2rem;}ol.wiz-list-level1 > li {list-style-type:decimal;}ol.wiz-list-level2 > li {list-style-type:lower-latin;}ol.wiz-list-level3 > li {list-style-type:lower-roman;}blockquote {padding:0 12px;padding:0 0.75rem;}blockquote > :first-child {margin-top:0;}blockquote > :last-child {margin-bottom:0;}img {border:0;max-width:100%;height:auto !important;margin:2px 0;}table {border-collapse:collapse;border:1px solid #bbbbbb;}td, th {padding:4px 8px;border-collapse:collapse;border:1px solid #bbbbbb;min-height:28px;word-break:break-all;box-sizing: border-box;}.wiz-hide {display:none !important;}</style></head>

<body class=""  spellcheck="false"><div><div><span data-wiz-span="data-wiz-span" style="font-size: 1.833rem; color: rgb(255, 0, 0);"><b>BUG</b></span></div><div><a href="http://localhost/arssh/css/animate.css"><span data-wiz-span="data-wiz-span" style="font-size: 1.667rem;"><b>http://localhost/arssh/css/animate.css</b></span></a></div><div> <img src="042-bug-采用通用controller导致-静态资源过滤失败_files/3027796.png" class="" style="vertical-align: bottom; max-width: 100%;"></div><div><img src="042-bug-采用通用controller导致-静态资源过滤失败_files/3258953.png" class="" style="vertical-align: bottom; max-width: 100%;"></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><span data-wiz-span="data-wiz-span" style="color: rgb(255, 0, 0); font-size: 1.667rem;"><b>正常</b></span></div><div><span data-wiz-span="data-wiz-span" style="font-size: 1.667rem; color: rgb(255, 0, 0);"><b><a href="http://localhost/arssh/script/bootstrap/css/bootstrap.min.css">http://localhost/arssh/script/bootstrap/css/bootstrap.min.css</a></b></span></div><div><span data-wiz-span="data-wiz-span" style="font-size: 1.667rem; color: rgb(255, 0, 0);"> </span><br></div><div><img src="042-bug-采用通用controller导致-静态资源过滤失败_files/3085609.png" style="vertical-align: bottom; max-width: 100%;" class=""></div><div><br></div><div><hr><p style="margin: 10px auto; text-indent: 0px; color: rgb(0, 0, 0); font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; font-size: 1rem; font-style: normal; text-align: start; background-color: rgb(255, 255, 255);"><span data-wiz-span="data-wiz-span" style="color: rgb(255, 0, 0); font-size: 1.667rem;"><b>SpringMVC提供&lt;mvc:resources&gt;来设置静态资源</b></span></p><p style="margin: 10px auto; text-indent: 0px; color: rgb(0, 0, 0); font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; font-size: 1rem; font-style: normal; text-align: start; background-color: rgb(255, 255, 255);"><span data-wiz-span="data-wiz-span" style="color: rgb(255, 0, 0); font-size: 1.667rem;"><b>但是增加该设置如果采用</b><span data-wiz-span="data-wiz-span" style="font-size: 2.167rem;"><b><span data-wiz-span="data-wiz-span" style="background-color: rgb(255, 255, 0);">通配符</span></b></span><b>的方式增加拦截器的话仍然会被拦截器拦截，可采用如下方案进行解决：</b></span></p><p style="margin:10px auto;text-indent:0px;color:rgb(0, 0, 0);font-family:Verdana, &quot;Lucida Grande&quot;, Arial, Helvetica, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;background-color:rgb(255, 255, 255);"><strong>方案一、拦截器中增加针对静态资源不进行过滤(涉及spring-mvc.xml)</strong></p><div class="cnblogs_code" style="background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);padding:5px;margin:5px 0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot; !important;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><div class="cnblogs_code_toolbar" style="margin-top:5px;background-color:rgb(245, 245, 245);"><span class="cnblogs_code_copy" style="font-family:&quot;Courier New&quot; !important;font-size:1rem;padding-right:5px;"><a href="" title="复制代码" style="color:rgb(29, 88, 209);text-decoration:none;background-color:rgb(245, 245, 245) !important;border:none !important;"><img src="042-bug-采用通用controller导致-静态资源过滤失败_files/0.1586759932528896.png" alt="复制代码" style="border:none !important;background-color:rgb(245, 245, 245) !important;"></a></span></div><pre style="margin:0px 0px 0px 22px;font-size:1rem;font-family:&quot;Courier New&quot; !important;"><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 1</span> <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:resources </span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);">location</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);"> mapping</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/**/*.js"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">/&gt;</span>  
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 2</span> <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:resources </span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);">location</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);"> mapping</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/**/*.css"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">/&gt;</span>  
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 3</span> <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:resources </span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);">location</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/assets/"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);"> mapping</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/assets/**/*"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">/&gt;</span>  
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 4</span> <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:resources </span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);">location</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/images/"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);"> mapping</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/images/*"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);"> cache-period</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="360000"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">/&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 5</span> 
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 6</span> <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:interceptors</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 7</span>     <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:interceptor</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 8</span>         <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:mapping </span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);">path</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/**/*"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">/&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 9</span>         <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:exclude-mapping </span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);">path</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/**/fonts/*"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">/&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">10</span>         <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:exclude-mapping </span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);">path</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/**/*.css"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">/&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">11</span>         <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:exclude-mapping </span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);">path</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/**/*.js"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">/&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">12</span>         <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:exclude-mapping </span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);">path</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/**/*.png"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">/&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">13</span>         <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:exclude-mapping </span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);">path</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/**/*.gif"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">/&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">14</span>         <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:exclude-mapping </span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);">path</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/**/*.jpg"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">/&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">15</span>         <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:exclude-mapping </span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);">path</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/**/*.jpeg"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">/&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">16</span>         <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:exclude-mapping </span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);">path</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/**/*login*"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">/&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">17</span>         <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:exclude-mapping </span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);">path</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="/**/*Login*"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">/&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">18</span>         <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">bean </span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(255, 0, 0);">class</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">="com.luwei.console.mg.interceptor.VisitInterceptor"</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">bean</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">19</span>     <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:interceptor</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">20</span> <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:interceptors</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span></pre><div class="cnblogs_code_toolbar" style="margin-top:5px;background-color:rgb(245, 245, 245);"><span class="cnblogs_code_copy" style="font-family:&quot;Courier New&quot; !important;font-size:1rem;padding-right:5px;"><a href="" title="复制代码" style="color:rgb(29, 88, 209);text-decoration:none;background-color:rgb(245, 245, 245) !important;border:none !important;"><img src="042-bug-采用通用controller导致-静态资源过滤失败_files/0.49382770460115233.png" alt="复制代码" style="border:none !important;background-color:rgb(245, 245, 245) !important;"></a></span></div></div><p style="margin:10px auto;text-indent:0px;color:rgb(0, 0, 0);font-family:Verdana, &quot;Lucida Grande&quot;, Arial, Helvetica, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;background-color:rgb(255, 255, 255);">&nbsp;</p><p style="margin:10px auto;text-indent:0px;color:rgb(0, 0, 0);font-family:Verdana, &quot;Lucida Grande&quot;, Arial, Helvetica, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;background-color:rgb(255, 255, 255);"><strong>方案二、使用默认的静态资源处理Servlet处理静态资源(涉及spring-mvc.xml, web.xml)</strong></p><p style="margin:10px auto;text-indent:0px;color:rgb(0, 0, 0);font-family:Verdana, &quot;Lucida Grande&quot;, Arial, Helvetica, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;background-color:rgb(255, 255, 255);">在spring-mvc.xml中启用默认Servlet</p><div class="cnblogs_code" style="background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);padding:5px;margin:5px 0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot; !important;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><pre style="margin:0px 0px 0px 22px;font-size:1rem;font-family:&quot;Courier New&quot; !important;"><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">1</span> <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">mvc:default-servlet-handler</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">/&gt;</span></pre></div><p style="margin:10px auto;text-indent:0px;color:rgb(0, 0, 0);font-family:Verdana, &quot;Lucida Grande&quot;, Arial, Helvetica, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;background-color:rgb(255, 255, 255);">在web.xml中增加对静态资源的处理</p><div class="cnblogs_code" style="background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);padding:5px;margin:5px 0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot; !important;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><div class="cnblogs_code_toolbar" style="margin-top:5px;background-color:rgb(245, 245, 245);"><span class="cnblogs_code_copy" style="font-family:&quot;Courier New&quot; !important;font-size:1rem;padding-right:5px;"><a href="" title="复制代码" style="color:rgb(29, 88, 209);text-decoration:none;background-color:rgb(245, 245, 245) !important;border:none !important;"><img src="042-bug-采用通用controller导致-静态资源过滤失败_files/0.6603982386893044.png" alt="复制代码" style="border:none !important;background-color:rgb(245, 245, 245) !important;"></a></span></div><pre style="margin:0px 0px 0px 22px;font-size:1rem;font-family:&quot;Courier New&quot; !important;"><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">1</span> <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">servlet-mapping</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>    
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">2</span>     <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">servlet-name</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>default<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">servlet-name</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>    
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">3</span>     <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">url-pattern</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>*.js<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">url-pattern</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>    
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">4</span>     <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">url-pattern</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>*.css<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">url-pattern</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>    
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">5</span>     <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">url-pattern</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>/assets/*"<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">url-pattern</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>    
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">6</span>     <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">url-pattern</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>/images/*<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">url-pattern</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>    
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">7</span> <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">servlet-mapping</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span> </pre><div class="cnblogs_code_toolbar" style="margin-top:5px;background-color:rgb(245, 245, 245);"><span class="cnblogs_code_copy" style="font-family:&quot;Courier New&quot; !important;font-size:1rem;padding-right:5px;"><a href="" title="复制代码" style="color:rgb(29, 88, 209);text-decoration:none;background-color:rgb(245, 245, 245) !important;border:none !important;"><img src="042-bug-采用通用controller导致-静态资源过滤失败_files/0.20083494091108212.png" alt="复制代码" style="border:none !important;background-color:rgb(245, 245, 245) !important;"></a></span></div></div><p style="margin:10px auto;text-indent:0px;color:rgb(0, 0, 0);font-family:Verdana, &quot;Lucida Grande&quot;, Arial, Helvetica, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;background-color:rgb(255, 255, 255);">但是当前的设置必须在Spring的Dispatcher的前面</p><p style="margin:10px auto;text-indent:0px;color:rgb(0, 0, 0);font-family:Verdana, &quot;Lucida Grande&quot;, Arial, Helvetica, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;background-color:rgb(255, 255, 255);">&nbsp;</p><p style="margin:10px auto;text-indent:0px;color:rgb(0, 0, 0);font-family:Verdana, &quot;Lucida Grande&quot;, Arial, Helvetica, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;background-color:rgb(255, 255, 255);"><strong>方案三、修改Spring的全局拦截设置为*.do的拦截（涉及web.xml）</strong></p><div class="cnblogs_code" style="background-color:rgb(245, 245, 245);border:1px solid rgb(204, 204, 204);padding:5px;margin:5px 0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot; !important;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><div class="cnblogs_code_toolbar" style="margin-top:5px;background-color:rgb(245, 245, 245);"><span class="cnblogs_code_copy" style="font-family:&quot;Courier New&quot; !important;font-size:1rem;padding-right:5px;"><a href="" title="复制代码" style="color:rgb(29, 88, 209);text-decoration:none;background-color:rgb(245, 245, 245) !important;border:none !important;"><img src="042-bug-采用通用controller导致-静态资源过滤失败_files/0.44511363201115617.png" alt="复制代码" style="border:none !important;background-color:rgb(245, 245, 245) !important;"></a></span></div><pre style="margin:0px 0px 0px 22px;font-size:1rem;font-family:&quot;Courier New&quot; !important;"><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 1</span> <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">servlet</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 2</span>     <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">servlet-name</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>SpringMVC<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">servlet-name</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 3</span>     <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">servlet-class</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>org.springframework.web.servlet.DispatcherServlet<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">servlet-class</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 4</span>     <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">init-param</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 5</span>         <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">param-name</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>contextConfigLocation<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">param-name</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 6</span>         <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">param-value</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>classpath:spring-mvc.xml<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">param-value</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 7</span>     <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">init-param</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 8</span>     <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">load-on-startup</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>1<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">load-on-startup</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);"> 9</span>     <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">async-supported</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>true<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">async-supported</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">10</span> <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">servlet</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">11</span> <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">servlet-mapping</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">12</span>     <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">servlet-name</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>SpringMVC<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">servlet-name</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">13</span>     <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">url-pattern</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>*.do<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">url-pattern</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span>
<span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 128, 128);">14</span> <span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&lt;/</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(128, 0, 0);">servlet-mapping</span><span style="font-family:&quot;Courier New&quot; !important;font-size:1rem;color:rgb(0, 0, 255);">&gt;</span></pre><div class="cnblogs_code_toolbar" style="margin-top:5px;background-color:rgb(245, 245, 245);"><span class="cnblogs_code_copy" style="font-family:&quot;Courier New&quot; !important;font-size:1rem;padding-right:5px;"><a href="" title="复制代码" style="color:rgb(29, 88, 209);text-decoration:none;background-color:rgb(245, 245, 245) !important;border:none !important;"><img src="042-bug-采用通用controller导致-静态资源过滤失败_files/0.5498621124139424.png" alt="复制代码" style="border:none !important;background-color:rgb(245, 245, 245) !important;"></a></span></div></div><p style="margin:10px auto;text-indent:0px;color:rgb(0, 0, 0);font-family:Verdana, &quot;Lucida Grande&quot;, Arial, Helvetica, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;background-color:rgb(255, 255, 255);">这样设置，Spring就会只针对以'.do'结尾的请求进行处理，不再维护静态资源</p><p style="margin:10px auto;text-indent:0px;color:rgb(0, 0, 0);font-family:Verdana, &quot;Lucida Grande&quot;, Arial, Helvetica, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;background-color:rgb(255, 255, 255);">&nbsp;</p><p style="margin:10px auto;text-indent:0px;color:rgb(0, 0, 0);font-family:Verdana, &quot;Lucida Grande&quot;, Arial, Helvetica, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;background-color:rgb(255, 255, 255);">针对这三种方案的优劣分析：</p><p style="margin:10px auto;text-indent:0px;color:rgb(0, 0, 0);font-family:Verdana, &quot;Lucida Grande&quot;, Arial, Helvetica, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;background-color:rgb(255, 255, 255);">第一种方案配置比较臃肿，多个拦截器时增加文件行数，不推荐使用；</p><p style="margin:10px auto;text-indent:0px;color:rgb(0, 0, 0);font-family:Verdana, &quot;Lucida Grande&quot;, Arial, Helvetica, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;background-color:rgb(255, 255, 255);">第二种方案使用默认的Servlet进行资源文件的访问，Spring拦截所有请求，然后再将资源文件交由默认的Sevlet进行处理，性能上少有损耗；</p><p style="margin:10px auto;text-indent:0px;color:rgb(0, 0, 0);font-family:Verdana, &quot;Lucida Grande&quot;, Arial, Helvetica, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;background-color:rgb(255, 255, 255);">第三种方案Spring只是处理以'.do'结尾的访问，性能上更加高效，但是再访问路径上必须都以'.do'结尾，URL不太文雅；</p><p style="margin:10px auto;text-indent:0px;color:rgb(0, 0, 0);font-family:Verdana, &quot;Lucida Grande&quot;, Arial, Helvetica, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;background-color:rgb(255, 255, 255);">综上所述，推荐使用第二和第三中方案</p><p style="margin:10px auto;text-indent:0px;color:rgb(0, 0, 0);font-family:Verdana, &quot;Lucida Grande&quot;, Arial, Helvetica, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;background-color:rgb(255, 255, 255);">&nbsp;<br><div style="color:gray;"><small>来源：&nbsp;<a href="http://www.cnblogs.com/banning/p/6195072.html">http://www.cnblogs.com/banning/p/6195072.html</a></small></div></p></div><div><br></div><div><br></div><div><br></div><div><br></div><br></div></body></html>