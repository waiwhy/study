<!DOCTYPE HTML><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>21-maven profiles</title>
    
<style id="wiz_custom_css">html, .wiz-editor-body {font-size: 12pt;}.wiz-editor-body {font-family: Helvetica, 'Hiragino Sans GB', '寰蒋闆呴粦', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;line-height: 1.6;margin: 0 auto;padding: 20px 16px;padding: 1.25rem 1rem;}.wiz-editor-body h1,.wiz-editor-body h2,.wiz-editor-body h3,.wiz-editor-body h4,.wiz-editor-body h5,.wiz-editor-body h6 {margin:20px 0 10px;margin:1.25rem 0 0.625rem;padding: 0;font-weight: bold;}.wiz-editor-body h1 {font-size:20pt;font-size:1.67rem;}.wiz-editor-body h2 {font-size:18pt;font-size:1.5rem;}.wiz-editor-body h3 {font-size:15pt;font-size:1.25rem;}.wiz-editor-body h4 {font-size:14pt;font-size:1.17rem;}.wiz-editor-body h5 {font-size:12pt;font-size:1rem;}.wiz-editor-body h6 {font-size:12pt;font-size:1rem;color: #777777;margin: 1rem 0;}.wiz-editor-body div,.wiz-editor-body p,.wiz-editor-body ul,.wiz-editor-body ol,.wiz-editor-body dl,.wiz-editor-body li {margin:0;}.wiz-editor-body blockquote,.wiz-editor-body table,.wiz-editor-body pre,.wiz-editor-body code {margin:8px 0;}.wiz-editor-body .CodeMirror pre {margin:0;}.wiz-editor-body ul,.wiz-editor-body ol {padding-left:32px;padding-left:2rem;}.wiz-editor-body ol.wiz-list-level1 > li {list-style-type:decimal;}.wiz-editor-body ol.wiz-list-level2 > li {list-style-type:lower-latin;}.wiz-editor-body ol.wiz-list-level3 > li {list-style-type:lower-roman;}.wiz-editor-body blockquote {padding:0 12px;padding:0 0.75rem;}.wiz-editor-body blockquote > :first-child {margin-top:0;}.wiz-editor-body blockquote > :last-child {margin-bottom:0;}.wiz-editor-body img {border:0;max-width:100%;height:auto !important;margin:2px 0;}.wiz-editor-body table {border-collapse:collapse;border:1px solid #bbbbbb;}.wiz-editor-body td,.wiz-editor-body th {padding:4px 8px;border-collapse:collapse;border:1px solid #bbbbbb;min-height:28px;word-break:break-all;box-sizing: border-box;}.wiz-hide {display:none !important;}</style><style name="wiz_style_for_load"></style></head>

<body class="wiz-editor-body wiz-editing"  spellcheck="false"><div><div class="article-title-box" style="padding:0px;margin:0px 0px 16px;color:rgb(51, 51, 51);font-family:&quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:0.875rem;font-style:normal;font-weight:400;text-align:start;text-indent:0px;"><h1>maven profiles</h1><div class="article-info-box" style="padding:0px 0px 14px;margin:0px;border-bottom:1px solid rgb(227, 227, 227);color:rgb(51, 51, 51);font-family:&quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:0.875rem;font-style:normal;font-weight:400;text-align:start;text-indent:0px;"><div class="article-bar-top d-flex" style="padding:0px;margin:0px;display:flex !important;color:rgb(133, 133, 133);"><div class="float-right" style="padding:0px;margin:0px 0px 0px auto;"><br></div></div></div><article style="display:block;padding-top:16px;color:rgb(51, 51, 51);font-family:&quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:0.875rem;font-style:normal;font-weight:400;text-align:start;text-indent:0px;"><div id="article_content" class="article_content csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post" style="padding:0px;margin:0px;"><div class="htmledit_views" style="padding:0px;margin:0px;font-family:&quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun;">&nbsp;<div style="padding:0px;margin:0px;"><span style="font-size:0.917rem;">Profiles</span><span style="font-size:0.917rem;">是</span><span style="font-size:0.917rem;">maven</span><span style="font-size:0.917rem;">的一个很关键的术语：</span><span style="font-size:0.917rem;">profile</span><span style="font-size:0.917rem;">是用来定义一些在</span><span style="font-size:0.917rem;">build lifecycle</span><span style="font-size:0.917rem;">中使用的</span><span style="font-size:0.917rem;">environmental variations</span><span style="font-size:0.917rem;">，</span><span style="font-size:0.917rem;">profile</span><span style="font-size:0.917rem;">可以设置成在不同的环境下激活不同的</span><span style="font-size:0.917rem;">profile</span><span style="font-size:0.917rem;">（例如：不同的</span><span style="font-size:0.917rem;">OS</span><span style="font-size:0.917rem;">激活不同的</span><span style="font-size:0.917rem;">profile</span><span style="font-size:0.917rem;">，不同的</span><span style="font-size:0.917rem;">JVM</span><span style="font-size:0.917rem;">激活不同的</span><span style="font-size:0.917rem;">profile</span><span style="font-size:0.917rem;">，不同的</span><span style="font-size:0.917rem;">dabase</span><span style="font-size:0.917rem;">激活不同的</span><span style="font-size:0.917rem;">profile</span><span style="font-size:0.917rem;">等等）。</span></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.333rem;">定义</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.333rem;">Profiles</span></strong></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><span style="font-size:0.917rem;">你可以把</span><span style="font-size:0.917rem;">profiles</span><span style="font-size:0.917rem;">定义在</span><span style="font-size:0.917rem;">4</span><span style="font-size:0.917rem;">个地方：</span></div><ul style="padding:0px;margin:0in 0px 24px;list-style:none;"><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;"><span style="font-size:0.917rem;color:rgb(255, 0, 0);">%M2_HOME%/conf/settings.xml</span><span style="font-size:0.917rem;">，这是针对该部电脑的所有</span><span style="font-size:0.917rem;">user</span><span style="font-size:0.917rem;">的</span><span style="font-size:0.917rem;">profiles</span><span style="font-size:0.917rem;">，是</span><span style="font-size:0.917rem;">global profiles</span><span style="font-size:0.917rem;">，它会影响所有的</span><span style="font-size:0.917rem;">maven project build</span></li></ul><div style="padding:0px;margin:0px 0px 0px 0.25in;">&nbsp;</div><ul style="padding:0px;margin:0in 0px 24px;list-style:none;"><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;"><span style="font-size:0.917rem;">&lt;your -home-directory<span style="color:rgb(255, 0, 0);">&gt;/.m2/settings.xml</span></span><span style="font-size:0.917rem;">，这是针对</span><span style="font-size:0.917rem;">per user</span><span style="font-size:0.917rem;">的</span><span style="font-size:0.917rem;">profiles</span><span style="font-size:0.917rem;">，是</span><span style="font-size:0.917rem;">user</span><span style="font-size:0.917rem;">级的</span><span style="font-size:0.917rem;">profiles</span><span style="font-size:0.917rem;">，它会影响当前</span><span style="font-size:0.917rem;">user</span><span style="font-size:0.917rem;">的所有</span><span style="font-size:0.917rem;">maven project build</span></li></ul><div style="padding:0px;margin:0px 0px 0px 0.25in;">&nbsp;</div><ul style="padding:0px;margin:0in 0px 24px;list-style:none;"><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;"><span style="font-size:0.917rem;">定义在</span><span style="font-size:0.917rem;color:rgb(255, 0, 0);">pom.xml</span><span style="font-size:0.917rem;">文件里面，这是仅针对该</span><span style="font-size:0.917rem;">project</span><span style="font-size:0.917rem;">的</span><span style="font-size:0.917rem;">profiles</span><span style="font-size:0.917rem;">，是</span><span style="font-size:0.917rem;">project</span><span style="font-size:0.917rem;">级的</span><span style="font-size:0.917rem;">profiles</span></li></ul><div style="padding:0px;margin:0px 0px 0px 0.25in;">&nbsp;</div><ul style="padding:0px;margin:0in 0px 24px;list-style:none;"><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;"><span style="font-size:0.917rem;color:rgb(255, 0, 0);">profiles.xml</span><span style="font-size:0.917rem;">，它和</span><span style="font-size:0.917rem;">pom.xml</span><span style="font-size:0.917rem;">在同一个目录下，也是</span><span style="font-size:0.917rem;">project</span><span style="font-size:0.917rem;">级的</span><span style="font-size:0.917rem;">profiles</span><span style="font-size:0.917rem;">，使用</span><span style="font-size:0.917rem;">profiles.xml</span><span style="font-size:0.917rem;">的目的是希望把</span><span style="font-size:0.917rem;">profiles</span><span style="font-size:0.917rem;">的设置从</span><span style="font-size:0.917rem;">pom.xml</span><span style="font-size:0.917rem;">里抽离出来设置。</span></li></ul><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.917rem;color:rgb(255, 0, 0);">定义在这</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.917rem;color:rgb(255, 0, 0);">4</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.917rem;color:rgb(255, 0, 0);">个地方的</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.917rem;color:rgb(255, 0, 0);">profiles</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.917rem;color:rgb(255, 0, 0);">中，涉及范围越窄的</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.917rem;color:rgb(255, 0, 0);">profiles</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.917rem;color:rgb(255, 0, 0);">会覆盖范围越宽的</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.917rem;color:rgb(255, 0, 0);">profiles</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.917rem;color:rgb(255, 0, 0);">。</span></strong><span style="font-size:0.917rem;">即：定义在</span><span style="font-size:0.917rem;">pom.xml</span><span style="font-size:0.917rem;">里</span><span style="font-size:0.917rem;">profiles</span><span style="font-size:0.917rem;">会覆盖</span><span style="font-size:0.917rem;">profiles.xml</span><span style="font-size:0.917rem;">的，</span><span style="font-size:0.917rem;">profiles.xml</span><span style="font-size:0.917rem;">的会覆盖</span><span style="font-size:0.917rem;">&lt;your -home-directory&gt;/.m2/settings.xml</span><span style="font-size:0.917rem;">的，</span><span style="font-size:0.917rem;">&lt;your -home-directory&gt;/.m2/settings.xml</span><span style="font-size:0.917rem;">的会覆盖</span><span style="font-size:0.917rem;">%M2_HOME%/conf/settings.xml</span><span style="font-size:0.917rem;">的。</span></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><span style="font-size:0.917rem;color:rgb(0, 0, 255);">不过请注意：设置在</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">pom.xml</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">里的</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">profiles</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">是最最推荐的，因为</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">pom.xml</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">会被</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">deploy</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">到</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">repository</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">里，所以</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">pom.xml</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">里的</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">profiles</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">才会</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">available for subsequent builds originating from the repository or as transitive dependencies</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">。而</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">settings.xml</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">和</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">profiles.xml</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">里定义的</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">profiles</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">不会被</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">deploy</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">到</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">repository</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">，则有诸多限制，因此，只有下面几个</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">profiles</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">能够在</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">settings.xml</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">和</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">profiles.xml</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">里定义：</span></div><ul style="padding:0px;margin:0in 0px 24px;list-style:none;"><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(255, 0, 0);"><span style="font-size:0.917rem;">repositories</span></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(255, 0, 0);"><span style="font-size:0.917rem;">pluginRepositories</span></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(255, 0, 0);"><span style="font-size:0.917rem;">properties</span></li></ul><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><span style="font-size:0.917rem;color:rgb(0, 0, 255);">其他类型的</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">profiles</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">必须在</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">pom.xml</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">里定义（上面</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">3</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">个</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">profiles</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">也可以在</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">pom.xml</span><span style="font-size:0.917rem;color:rgb(0, 0, 255);">里定义）。</span></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">Pom.xml</span><span style="font-size:0.833rem;">能够定义的</span><span style="font-size:0.833rem;">profiles</span><span style="font-size:0.833rem;">包括：</span></div><ul style="padding:0px;margin:0px 0px 24px;list-style:none;"><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.75rem;">&lt;repositories&gt;</span></strong></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.75rem;">&lt;pluginRepositories&gt;</span></strong></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.75rem;">&lt;dependencies&gt;</span></strong></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.75rem;">&lt;plugins&gt;</span></strong></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.75rem;">&lt;properties&gt;</span></strong><span style="font-size:0.75rem;"><span>&nbsp;</span>(not actually available in the main POM, but used behind the scenes)</span></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.75rem;">&lt;modules&gt;</span></strong></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.75rem;">&lt;reporting&gt;</span></strong></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.75rem;">&lt;dependencyManagement&gt;</span></strong></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.75rem;">&lt;distributionManagement&gt;</span></strong></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><span style="font-size:0.75rem;">a subset of the<span>&nbsp;</span><strong style="font-weight:700;">&lt;build&gt;</strong><span>&nbsp;</span>element, which consists of:</span><ul style="padding:0px;margin:0px 0px 24px;list-style:none;"><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.75rem;">&lt;defaultGoal&gt;</span></strong></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.75rem;">&lt;resources&gt;</span></strong></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.75rem;">&lt;testResources&gt;</span></strong></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.75rem;">&lt;finalName&gt;</span></strong></li></ul></li></ul><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.333rem;">激活</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.333rem;">Profiles</span></strong></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">激活</span><span style="font-size:0.833rem;">profiles</span><span style="font-size:0.833rem;">有下列几种方式：</span></div><ul style="padding:0px;margin:0px 0px 24px;list-style:none;"><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><span style="font-size:0.75rem;">Explicitly</span></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><span style="font-size:0.75rem;">Through Maven settings</span></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><span style="font-size:0.75rem;">Based on environment variables</span></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><span style="font-size:0.75rem;">OS settings</span></li><li style="padding:0px;margin:8px 0px 0px 32px;list-style-type:disc;color:rgb(51, 51, 51);"><span style="font-size:0.75rem;">Present or missing files</span></li></ul><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px 0px 0px 0.5in;text-indent:-0.25in;"><span>1）</span>通过mvn命令的<span style="color:rgb(255, 0, 0);">-P</span><span style="color:rgb(255, 0, 0);">参数来显示激活</span><span style="color:rgb(255, 0, 0);">profiles</span>，<span style="color:rgb(0, 0, 255);">该参数值是</span><span style="color:rgb(0, 0, 255);">profile id list</span><span style="color:rgb(0, 0, 255);">（之间用逗号连接）</span>。如：</div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">mvn groupId:artifactId:goal<span>&nbsp;</span><span style="color:rgb(255, 0, 0);">-P profileId-1,profileId-2</span></span></div><div style="padding:0px;margin:0px 0px 0px 0.25in;">&nbsp;</div><div style="padding:0px;margin:0px 0px 0px 0.5in;text-indent:-0.25in;"><strong style="font-weight:700;"><span style="font-weight:700;color:rgb(255, 0, 0);">2）<span style="font-weight:normal;font-style:normal;font-size:0.583rem;font-family:&quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&nbsp;</span></span></span></strong><strong style="font-weight:700;"><span style="font-weight:700;color:rgb(255, 0, 0);">通过在</span><span style="font-weight:700;color:rgb(255, 0, 0);">settings.xml</span></strong><strong style="font-weight:700;"><span style="font-weight:700;color:rgb(255, 0, 0);">里设置</span><span style="font-weight:700;color:rgb(255, 0, 0);">&lt;activeProfiles&gt; element</span></strong><strong style="font-weight:700;"><span style="font-weight:700;color:rgb(255, 0, 0);">来激活（当然</span><span style="font-weight:700;color:rgb(255, 0, 0);">&lt;profiles&gt;</span></strong><strong style="font-weight:700;"><span style="font-weight:700;color:rgb(255, 0, 0);">也必须在</span><span style="font-weight:700;color:rgb(255, 0, 0);">settings.xml</span></strong><strong style="font-weight:700;"><span style="font-weight:700;color:rgb(255, 0, 0);">里定义）</span></strong></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&lt;settings&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&nbsp;...</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;profiles&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 1in;"><span style="font-size:0.833rem;">&nbsp;&lt;profile&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 1in;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;id&gt;profile1&lt;/id&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 1in;"><span style="font-size:0.833rem;">&nbsp;&nbsp; &nbsp;...</span></div><div style="padding:0px;margin:0px 0px 0px 1in;"><span style="font-size:0.833rem;">&nbsp;&lt;/profile&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/profiles&gt;</span></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;color:rgb(255, 0, 0);">&nbsp;&lt;activeProfiles&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;color:rgb(255, 0, 0);">&nbsp;&nbsp;&nbsp; &lt;activeProfile&gt;profile-1&lt;/activeProfile&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;color:rgb(255, 0, 0);">&nbsp;&lt;/activeProfiles&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&nbsp;...</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&lt;/settings&gt;</span></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 列在&lt;activeProfiles&gt;里的profiles list会在每一个project执行时被激活</div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px 0px 0px 0.5in;text-indent:-0.25in;"><span>3）</span>Profiles还可以基于detect到的build environment 的state来自动激活，而不需要象上面2种方式显式激活。这只需要在profile定义时使用&lt;activation&gt; element。如：</div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&lt;profiles&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&nbsp;&lt;profile&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;color:rgb(255, 0, 0);">&nbsp;&nbsp;&nbsp; &lt;activation&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;color:rgb(255, 0, 0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;jdk&gt;1.4&lt;/jdk&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;color:rgb(255, 0, 0);">&nbsp;&nbsp;&nbsp; &lt;/activation&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; ...</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&nbsp;&lt;/profile&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&lt;/profiles&gt;</span></div><div style="padding:0px;margin:0px;">上面的代码表示：<span style="color:rgb(255, 0, 0);">如果</span><span style="color:rgb(255, 0, 0);">JDK version start with 1.4<span>&nbsp;</span></span><span style="color:rgb(255, 0, 0);">（</span><span style="color:rgb(255, 0, 0);">eg. "1.4.0_08", "1.4.2_07", "1.4"</span><span style="color:rgb(255, 0, 0);">），该</span><span style="color:rgb(255, 0, 0);">profile</span><span style="color:rgb(255, 0, 0);">会被激活</span></div><div style="padding:0px;margin:0px 0px 0px 0.25in;">&nbsp;</div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&lt;profiles&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;&lt;profile&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;activation&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;name&gt;debug&lt;/name&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;/activation&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; ...</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;&lt;/profile&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&lt;/profiles&gt;</span></div><div style="padding:0px;margin:0px;">上面的代码表示：如果存在system propertie “debug”，该profile会被激活。为了激活它，输入的命令类似于：</div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">mvn groupId:artifactId:goal<span>&nbsp;</span><strong style="font-weight:700;"><span style="font-weight:700;color:rgb(255, 0, 0);">–Ddebug</span></strong></span></div><div style="padding:0px;margin:0px 0px 0px 0.25in;">&nbsp;</div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&lt;profiles&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;&lt;profile&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;activation&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;color:rgb(255, 0, 0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;color:rgb(255, 0, 0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;name&gt;environment&lt;/name&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;color:rgb(255, 0, 0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;value&gt;test&lt;/value&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;color:rgb(255, 0, 0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;/activation&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; ...</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;&lt;/profile&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&lt;/profiles&gt;</span></div><div style="padding:0px;margin:0px;">上面的代码表示：如果存在system propertie “environment”的值为test，该profile会被激活。为了激活它，输入的命令类似于：</div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">mvn groupId:artifactId:goal<span>&nbsp;</span><strong style="font-weight:700;"><span style="font-weight:700;color:rgb(255, 0, 0);">-Denvironment=test</span></strong></span><br><br></div><div style="padding:0px;margin:0px 0px 0px 0.5in;text-indent:-0.25in;"><span style="color:rgb(255, 0, 0);">4）</span><span style="color:rgb(255, 0, 0);">Profiles</span><span style="color:rgb(255, 0, 0);">还可以基于</span><span style="color:rgb(255, 0, 0);">OS setting</span><span style="color:rgb(255, 0, 0);">来自动激活</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&lt;profiles&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&nbsp;&lt;profile&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;activation&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;os&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;name&gt;Windows XP&lt;/name&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;family&gt;Windows&lt;/family&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;arch&gt;x86&lt;/arch&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;version&gt;5.1.2600&lt;/version&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;/os&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/activation&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&nbsp;...</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&nbsp;&lt;/profile&gt;</span></div><div style="padding:0px;margin:0px 0px 0px 45.8pt;"><span style="font-size:0.833rem;">&lt;/profiles&gt;</span></div><div style="padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 上面的代码表示：如果OS为windows xp，该profile会被激活</div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px 0px 0px 0.5in;text-indent:-0.25in;"><span>5）</span><span style="color:rgb(255, 0, 0);">根据某个</span><span style="color:rgb(255, 0, 0);">file</span><span style="color:rgb(255, 0, 0);">不存在而激活</span><span style="color:rgb(255, 0, 0);">profile</span>。例如下面定义的profile是在<tt><span style="font-size:0.833rem;">target/generated-sources/axistools/wsdl2java/org/apache/maven</span></tt>不存在时激活</div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&lt;profiles&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&lt;profile&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;activation&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(255, 0, 0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;file&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(255, 0, 0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;missing&gt;target/generated-sources/axistools/wsdl2java/org/apache/maven&lt;/missing&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(255, 0, 0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/file&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;/activation&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; ...</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&lt;/profile&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&lt;/profiles&gt;</span></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.333rem;">使用</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.333rem;">Profiles</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.333rem;">时要注意的</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.333rem;">2</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.333rem;">个问题</span></strong></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.167rem;">第一、</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.167rem;">external properties</span></strong></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;">不是定义在pom.xml里的properties都称为external properties。举例说明最明了：</div><div style="padding:0px;margin:0px;"><strong style="font-weight:700;">pom.xml</strong><strong style="font-weight:700;">：</strong></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&lt;project&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;...</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&lt;build&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;plugins&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;plugin&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;groupId&gt;org.myco.plugins&lt;/groupId&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;artifactId&gt;spiffy-integrationTest-plugin&lt;/artifactId&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;version&gt;1.0&lt;/version&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;configuration&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;appserverHome&gt;<span style="color:rgb(255, 0, 0);">${appserver.home}</span>&lt;/appserverHome&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/configuration&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/plugin&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;/plugins&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&lt;/build&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;...</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&lt;/project&gt;</span></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><tt><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.833rem;">~/.m2/settings.xml</span></strong></tt></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&lt;settings&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;...</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&lt;profiles&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;profile&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;id&gt;appserverConfig&lt;/id&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(255, 0, 0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;properties&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(255, 0, 0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;appserver.home&gt;/path/to/appserver&lt;/appserver.home&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(255, 0, 0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/properties&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;/profile&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&lt;/profiles&gt;</span></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&nbsp;&lt;activeProfiles&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp; &lt;activeProfile&gt;appserverConfig&lt;/activeProfile&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&nbsp;&lt;/activeProfiles&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;...</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&lt;/settings&gt;</span></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><strong style="font-weight:700;"><span style="font-weight:700;color:rgb(0, 0, 255);">当你执行该</span><span style="font-weight:700;color:rgb(0, 0, 255);">pom</span></strong><strong style="font-weight:700;"><span style="font-weight:700;color:rgb(0, 0, 255);">时，运行正常。但如果</span><span style="font-weight:700;color:rgb(0, 0, 255);">another user</span></strong><strong style="font-weight:700;"><span style="font-weight:700;color:rgb(0, 0, 255);">执行时，则运行失败，因为无法解析</span><span style="font-weight:700;color:rgb(0, 0, 255);">${appserver.home}</span></strong><strong style="font-weight:700;"><span style="font-weight:700;color:rgb(0, 0, 255);">（这是由于该</span><span style="font-weight:700;color:rgb(0, 0, 255);">properties</span></strong><strong style="font-weight:700;"><span style="font-weight:700;color:rgb(0, 0, 255);">是定义在</span><span style="font-weight:700;color:rgb(0, 0, 255);">user</span></strong><strong style="font-weight:700;"><span style="font-weight:700;color:rgb(0, 0, 255);">级别的</span><span style="font-weight:700;color:rgb(0, 0, 255);">settings.xml</span></strong><strong style="font-weight:700;"><span style="font-weight:700;color:rgb(0, 0, 255);">）。</span></strong></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><span style="color:rgb(0, 0, 255);">解决方法</span>就是把该profile放到pom.xml里定义，但这样做的<span style="color:rgb(0, 0, 255);">缺点是所有使用该</span>profile的pom.xml每个都要定义一次该profile。</div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><span style="color:rgb(255, 0, 0);">最好的解决方法</span>是：Since Maven provides good support for project inheritance, it's possible to stick this sort of configuration in the<span>&nbsp;</span><strong style="font-weight:700;">pluginManagement</strong><span>&nbsp;</span>section of a team-level POM or similar, and simply inherit the paths</div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.167rem;">第二、</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.167rem;">pom.xml</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.167rem;">里定义的</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.167rem;">profiles</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.167rem;">不符合激活条件</span></strong></div><div style="padding:0px;margin:0px;">依然是举个例子：</div><div style="padding:0px;margin:0px;"><strong style="font-weight:700;">pom.xml</strong><strong style="font-weight:700;">：</strong></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&lt;project&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;...</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&lt;profiles&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;profile&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;id&gt;<span style="color:rgb(255, 0, 0);">appserverConfig-dev</span>&lt;/id&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;activation&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;name&gt;env&lt;/name&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;value&gt;</span><span style="font-size:0.833rem;color:rgb(255, 0, 0);">dev</span><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&lt;/value&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/activation&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;properties&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&nbsp;</span><span style="color:rgb(0, 0, 255);">&lt;appserver.home&gt;/path/to/dev/appserver&lt;/appserver.home&gt;</span></span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/properties&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;/profile&gt;</span></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;profile&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;id&gt;<span style="color:rgb(255, 0, 0);">appserverConfig-dev-2</span>&lt;/id&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;activation&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;name&gt;env&lt;/name&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;value&gt;</span><span style="font-size:0.833rem;color:rgb(255, 0, 0);">dev-2</span><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&lt;/value&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/property&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/activation&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;properties&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;color:rgb(0, 0, 255);">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;appserver.home&gt;/path/to/dev/appserver2&lt;/appserver.home&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/properties&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;/profile&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&lt;/profiles&gt;</span></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&lt;build&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;plugins&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;plugin&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;groupId&gt;org.myco.plugins&lt;/groupId&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;artifactId&gt;spiffy-integrationTest-plugin&lt;/artifactId&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;version&gt;1.0&lt;/version&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;configuration&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;appserverHome&gt;<span style="color:rgb(255, 0, 0);">${appserver.home}</span>&lt;/appserverHome&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/configuration&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/plugin&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&nbsp;&nbsp; &lt;/plugins&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;&lt;/build&gt;</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&nbsp;...</span></div><div style="padding:0px;margin:0px;"><span style="font-size:0.833rem;">&lt;/project&gt;</span></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;">上面定义的pom.xml定义了两个profile：不同的”env”参数值会激活不同的profile。当执行命令：</div><div style="padding:0px;margin:0px;text-indent:0.5in;"><span style="font-size:0.833rem;">mvn<span>&nbsp;</span><span style="color:rgb(255, 0, 0);">-Denv=dev-2</span><span>&nbsp;</span>integration-test</span></div><div style="padding:0px;margin:0px;">就会激活profile “<tt><span style="font-size:0.833rem;">appserverConfig-dev-2</span></tt>”</div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;">当执行命令：</div><div style="padding:0px;margin:0px;text-indent:0.5in;"><span style="font-size:0.833rem;">mvn<span>&nbsp;</span><span style="color:rgb(255, 0, 0);">-Denv=dev</span><span>&nbsp;</span>integration-test</span></div><div style="padding:0px;margin:0px;">就会激活profile “<tt><span style="font-size:0.833rem;">appserverConfig-dev</span></tt>”</div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;">而当执行命令：</div><div style="padding:0px;margin:0px;text-indent:0.5in;"><span style="font-size:0.833rem;">mvn<span>&nbsp;</span><span style="color:rgb(255, 0, 0);">-Denv=production</span><span>&nbsp;</span>integration-test</span></div><div style="padding:0px;margin:0px;">则运行失败，因为没有激活任何一个profile，因此无法解析${appserver.home}。</div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;"><strong style="font-weight:700;">&nbsp;</strong></div><div style="padding:0px;margin:0px;"><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.333rem;">查看</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.333rem;">build time</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.333rem;">过程中使用了哪些</span></strong><strong style="font-weight:700;"><span style="font-weight:700;font-size:1.333rem;">Profiles</span></strong></div><div style="padding:0px;margin:0px;">执行<strong style="font-weight:700;">help plugin</strong>的<strong style="font-weight:700;">active-profiles goal</strong>，使用命令：</div><div style="padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&nbsp;</span><strong style="font-weight:700;"><span style="font-weight:700;font-size:0.833rem;color:rgb(255, 0, 0);">mvn help:active-profiles</span></strong></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;">例子：</div><div style="padding:0px;margin:0px;">对于上面的例子，如果输入命令：</div><div style="padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&nbsp;</span><span style="font-size:0.833rem;color:rgb(255, 0, 0);">mvn help:active-profiles -Denv=dev</span></div><div style="padding:0px;margin:0px;">则输出的是：</div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">The following profiles are active:</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;">&nbsp;</div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;- appserverConfig-dev (source: pom)</span></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;">如果有一个profile定义在settings.xml里并使用&lt;activeProfile&gt;激活，那么输入命令：</div><div style="padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&nbsp;</span><span style="font-size:0.833rem;color:rgb(255, 0, 0);">mvn help:active-profiles</span></div><div style="padding:0px;margin:0px;">则输出的是：</div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">The following profiles are active:</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;">&nbsp;</div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;- appserverConfig (source: settings.xml)</span></div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;">&nbsp;</div><div style="padding:0px;margin:0px;">如果输入命令：</div><div style="padding:0px;margin:0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&nbsp;</span><span style="font-size:0.833rem;">mvn help:active-profiles<span>&nbsp;</span><span style="color:rgb(255, 0, 0);">-P appserverConfig-dev</span></span></div><div style="padding:0px;margin:0px;">那么输出的是：</div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">The following profiles are active:</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;- appserverConfig-dev (source: pom)</span></div><div style="padding:0px;margin:0px 0px 0px 0.5in;"><span style="font-size:0.833rem;">&nbsp;- appserverConfig (source: settings.xml)</span></div></div></div><br><div style="color:gray;"><small>来源：&nbsp;<a href="https://blog.csdn.net/totogogo/article/details/1953379">https://blog.csdn.net/totogogo/article/details/1953379</a></small></div></article></div><br></div></body></html>