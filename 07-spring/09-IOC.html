<!DOCTYPE HTML><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>09-IOC</title>
    
<style id="wiz_custom_css">html, body {font-size: 12pt;}body {font-family: Helvetica, 'Hiragino Sans GB', '微软雅黑', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;line-height: 1.6;margin: 0 auto;padding: 20px 16px;padding: 1.25rem 1rem;}h1, h2, h3, h4, h5, h6 {margin:20px 0 10px;margin:1.25rem 0 0.625rem;padding: 0;font-weight: bold;}h1 {font-size:20pt;font-size:1.67rem;}h2 {font-size:18pt;font-size:1.5rem;}h3 {font-size:15pt;font-size:1.25rem;}h4 {font-size:14pt;font-size:1.17rem;}h5 {font-size:12pt;font-size:1rem;}h6 {font-size:12pt;font-size:1rem;color: #777777;margin: 1rem 0;}div, p, ul, ol, dl, li {margin:0;}blockquote, table, pre, code {margin:8px 0;}ul, ol {padding-left:32px;padding-left:2rem;}ol.wiz-list-level1 > li {list-style-type:decimal;}ol.wiz-list-level2 > li {list-style-type:lower-latin;}ol.wiz-list-level3 > li {list-style-type:lower-roman;}blockquote {padding:0 12px;padding:0 0.75rem;}blockquote > :first-child {margin-top:0;}blockquote > :last-child {margin-bottom:0;}img {border:0;max-width:100%;height:auto !important;margin:2px 0;}table {border-collapse:collapse;border:1px solid #bbbbbb;}td, th {padding:4px 8px;border-collapse:collapse;border:1px solid #bbbbbb;min-height:28px;word-break:break-all;box-sizing: border-box;}.wiz-hide {display:none !important;}</style></head>

<body class=""  spellcheck="false"><div><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;font-size:2rem;background-color:rgb(255, 255, 255);"><strong style="font-weight:bold;">引述</strong></span><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">：IoC（控制反转：Inverse of Control）是Spring容器的内核，AOP、声明式事务等功能在此基础上开花结果。但是IoC这个重要的概念却比较晦涩隐讳，不容易让人望文生义，这不能不说是一大遗憾。不过IoC确实包括很多内涵，它涉及代码解耦、设计模式、代码优化等问题的考量，我们打算通过一个小例子来说明这个概念。<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><strong style="font-weight:bold;color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="font-size:1.5rem;">通过实例理解IoC的概念</span></strong><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);"><span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp; 贺岁大片在中国已经形成了一个传统，每到年底总有多部贺岁大片纷至沓来让人应接不暇。在所有贺岁大片中，张之亮的《墨攻》算是比较出彩的一部。该片讲述了战国时期墨家人革离帮助梁国反抗赵国侵略的个人英雄主义故事，恢宏壮阔、浑雄凝重的历史场面相当震撼。其中有一个场景：当刘德华所饰演的墨者革离到达梁国都城下，城上梁国守军问到：“来者何人？”刘德华回答：“墨者革离！”我们不妨通过一个Java类为这个“城门叩问”的场景进行编剧，并借此理解IoC的概念：<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">代码清单3-1&nbsp; MoAttack：通过演员安排剧本<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="dp-highlighter" style="font-family:Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Consolas, 'Courier New', monospace;font-size:1.125rem;width:678.991px;margin-left:9px;padding:1px;color:rgb(0, 0, 0);font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="bar"><div class="tools" style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码<span class="Apple-converted-space">&nbsp;</span><embed wmode="transparent" src="http://stamen.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=public%20class%20MoAttack%20%7B%0A%20%20%20public%20void%20cityGateAsk()%7B%0A%20%20%20%20%20%20%20%20%2F%2F%E2%91%A0%E6%BC%94%E5%91%98%E7%9B%B4%E6%8E%A5%E4%BE%B5%E5%85%A5%E5%89%A7%E6%9C%AC%0A%09%20%20%20LiuDeHua%20ldh%20%3D%20new%20LiuDeHua()%3B%0A%09%20%20%20ldh.responseAsk(%22%E5%A2%A8%E8%80%85%E9%9D%A9%E7%A6%BB%EF%BC%81%22)%3B%0A%20%20%20%7D%0A%7D%0A" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" title="undefined">&nbsp;<a href="" title="收藏这段代码" style="color:rgb(0, 102, 153);text-decoration:underline;"><img class="star" src="09-IOC_files/0.17181937081080623.png" alt="收藏代码" style="border:0px;"></a></div></div><ol class="dp-j wiz-list-level1" style="font-size:1rem;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;color:rgb(43, 145, 175);background-color:rgb(255, 255, 255);"><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;"><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">class</span><span style="color:black;">&nbsp;MoAttack&nbsp;{&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;">&nbsp;cityGateAsk(){&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">//①演员直接侵入剧本</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LiuDeHua&nbsp;ldh&nbsp;=&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">new</span><span style="color:black;">&nbsp;LiuDeHua();&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ldh.responseAsk(<span class="string" style="color:blue;">"墨者革离！"</span><span style="color:black;">);&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">}&nbsp;&nbsp;</span></li></ol></div><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp; 我们会发现以上剧本在①处，作为具体角色饰演者的刘德华直接侵入到剧本中，使剧本和演员直接耦合在一起（图3-1）。<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><img src="09-IOC_files/0.9638054980477047.png" style="border:0px;color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);"></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp; 一个明智的编剧在剧情创作时应围绕故事的角色进行，而不应考虑角色的具体饰演者，这样才可能在剧本投拍时自由地遴选任何适合的演员，而非绑定在刘德华一人身上。通过以上的分析，我们知道需要为该剧本主人公革离定义一个接口：<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">代码清单3-2&nbsp; MoAttack：引入剧本角色<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="dp-highlighter" style="font-family:Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Consolas, 'Courier New', monospace;font-size:1.125rem;width:678.991px;margin-left:9px;padding:1px;color:rgb(0, 0, 0);font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="bar"><div class="tools" style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码<span class="Apple-converted-space">&nbsp;</span><embed wmode="transparent" src="http://stamen.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=public%20class%20MoAttack%20%7B%0A%20%20%20public%20void%20cityGateAsk()%0A%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%E2%91%A0%E5%BC%95%E5%85%A5%E9%9D%A9%E7%A6%BB%E8%A7%92%E8%89%B2%E6%8E%A5%E5%8F%A3%0A%09%20%20%20GeLi%20geli%20%3D%20new%20LiuDeHua()%3B%20%0A%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%E2%91%A1%E9%80%9A%E8%BF%87%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%B1%95%E5%89%A7%E6%83%85%0A%09%20%20%20geli.responseAsk(%22%E5%A2%A8%E8%80%85%E9%9D%A9%E7%A6%BB%EF%BC%81%22)%3B%20%20%0A%20%20%20%7D%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" title="undefined">&nbsp;<a href="" title="收藏这段代码" style="color:rgb(0, 102, 153);text-decoration:underline;"><img class="star" src="09-IOC_files/0.13522173955196415.png" alt="收藏代码" style="border:0px;"></a></div></div><ol class="dp-j wiz-list-level1" style="font-size:1rem;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;color:rgb(43, 145, 175);background-color:rgb(255, 255, 255);"><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;"><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">class</span><span style="color:black;">&nbsp;MoAttack&nbsp;{&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;">&nbsp;cityGateAsk()&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">//①引入革离角色接口</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GeLi&nbsp;geli&nbsp;=&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">new</span><span style="color:black;">&nbsp;LiuDeHua();&nbsp;&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">//②通过接口开展剧情</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;geli.responseAsk(<span class="string" style="color:blue;">"墨者革离！"</span><span style="color:black;">);&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">}&nbsp;&nbsp;</span></li></ol></div><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp; 在①处引入了剧本的角色——革离，剧本的情节通过角色展开，在拍摄时角色由演员饰演，如②处所示。因此墨攻、革离、刘德华三者的类图关系如图 3 2所示：<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><img src="09-IOC_files/0.8851239468344168.png" style="border:0px;color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);"><span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp; 可是，从图3 2中，我们可以看出MoAttack同时依赖于GeLi接口和LiuDeHua类，并没有达到我们所期望的剧本仅依赖于角色的目的。但是角色最终必须通过具体的演员才能完成拍摄，如何让LiuDeHua和剧本无关而又能完成GeLi的具体动作呢？当然是在影片投拍时，导演将LiuDeHua安排在GeLi的角色上，导演将剧本、角色、饰演者装配起来（图3-3）。<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><img src="09-IOC_files/0.06013576748117866.png" style="border:0px;color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);"><span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">通过引入导演，使剧本和具体饰演者解耦了。对应到软件中，导演像是一个装配器，安排演员表演具体的角色。<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp; 现在我们可以反过来讲解IoC的概念了。IoC（Inverse of Control）的字面意思是控制反转，它包括两个内容：<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><ul style="margin:0px 0px 1.5em;padding:0px;color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><li style="margin:0px 0px 0.25em 30px;padding:0px;">其一是控制</li><li style="margin:0px 0px 0.25em 30px;padding:0px;">其二是反转</li></ul><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;<span class="Apple-converted-space">&nbsp;</span></span><strong style="font-weight:bold;color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:blue;">那到底是什么东西的“控制”被“反转”了呢</span></strong><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">？对应到前面的例子，“控制”是指选择GeLi角色扮演者的控制权；“反转”是指这种控制权从《墨攻》剧本中移除，转交到导演的手中。对于软件来说，即是某一接口具体实现类的选择控制权从调用类中移除，转交给第三方决定。<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp; 因为IoC确实不够开门见山，因此业界曾进行了广泛的讨论，最终软件界的泰斗级人物Martin Fowler提出了DI（依赖注入：Dependency Injection）的概念用以代替IoC，即让调用类对某一接口实现类的依赖关系由第三方（容器或协作类）注入，以移除调用类对某一接口实现类的依赖。“依赖注入”这个名词显然比“控制反转”直接明了、易于理解。<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><strong style="font-weight:bold;color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="font-size:1.5rem;">IoC的类型</span></strong><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);"><span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp; 从注入方法上看，主要可以划分为三种类型：构造函数注入、属性注入和接口注入。Spring支持构造函数注入和属性注入。下面我们继续使用以上的例子说明这三种注入方法的区别。<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><strong style="font-weight:bold;color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="font-size:1.125rem;">构造函数注入</span></strong><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);"><span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">在构造函数注入中，我们通过调用类的构造函数，将接口实现类通过构造函数变量传入，如代码清单3-3所示：<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">代码清单3-3&nbsp; MoAttack：通过构造函数注入革离扮演者<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="dp-highlighter" style="font-family:Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Consolas, 'Courier New', monospace;font-size:1.125rem;width:678.991px;margin-left:9px;padding:1px;color:rgb(0, 0, 0);font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="bar"><div class="tools" style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码<span class="Apple-converted-space">&nbsp;</span><embed wmode="transparent" src="http://stamen.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=public%20class%20MoAttack%20%7B%0A%20%20%20private%20GeLi%20geli%3B%0A%20%20%20%2F%2F%E2%91%A0%E6%B3%A8%E5%85%A5%E9%9D%A9%E7%A6%BB%E7%9A%84%E5%85%B7%E4%BD%93%E6%89%AE%E6%BC%94%E8%80%85%0A%20%20%20public%20MoAttack(GeLi%20geli)%7B%20%0A%09%20%20%20this.geli%20%3D%20geli%3B%0A%20%20%20%7D%0A%09public%20void%20cityGateAsk()%7B%0A%09%20%20%20geli.responseAsk(%22%E5%A2%A8%E8%80%85%E9%9D%A9%E7%A6%BB%EF%BC%81%22)%3B%0A%20%20%20%7D%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="" title="收藏这段代码" style="color:rgb(0, 102, 153);text-decoration:underline;"><img class="star" src="09-IOC_files/0.22119214993904146.png" alt="收藏代码" style="border:0px;"></a></div></div><ol class="dp-j wiz-list-level1" style="font-size:1rem;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;color:rgb(43, 145, 175);background-color:rgb(255, 255, 255);"><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;"><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">class</span><span style="color:black;">&nbsp;MoAttack&nbsp;{&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">private</span><span style="color:black;">&nbsp;GeLi&nbsp;geli;&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;<span class="comment" style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">//①注入革离的具体扮演者</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;MoAttack(GeLi&nbsp;geli){&nbsp;&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">this</span><span style="color:black;">.geli&nbsp;=&nbsp;geli;&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;">&nbsp;cityGateAsk(){&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;geli.responseAsk(<span class="string" style="color:blue;">"墨者革离！"</span><span style="color:black;">);&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">}&nbsp;&nbsp;</span></li></ol></div><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp; MoAttack的构造函数不关心具体是谁扮演革离这个角色，只要在①处传入的扮演者按剧本要求完成相应的表演即可。角色的具体扮演者由导演来安排，如代码清单3-4所示：<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">代码清单3-4&nbsp; Director：通过构造函数注入革离扮演者<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="dp-highlighter" style="font-family:Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Consolas, 'Courier New', monospace;font-size:1.125rem;width:678.991px;margin-left:9px;padding:1px;color:rgb(0, 0, 0);font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="bar"><div class="tools" style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码<span class="Apple-converted-space">&nbsp;</span><embed wmode="transparent" src="http://stamen.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=public%20class%20Director%20%7B%0A%20%20%20public%20void%20direct()%7B%0A%20%20%20%20%20%20%20%20%2F%2F%E2%91%A0%E6%8C%87%E5%AE%9A%E8%A7%92%E8%89%B2%E7%9A%84%E6%89%AE%E6%BC%94%E8%80%85%0A%09%20%20%20GeLi%20geli%20%3D%20new%20LiuDeHua()%3B%20%20%0A%0A%20%20%20%20%20%20%20%20%2F%2F%E2%91%A1%E6%B3%A8%E5%85%A5%E5%85%B7%E4%BD%93%E6%89%AE%E6%BC%94%E8%80%85%E5%88%B0%E5%89%A7%E6%9C%AC%E4%B8%AD%0A%09%20%20%20MoAttack%20moAttack%20%3D%20new%20MoAttack(geli)%3B%20%0A%09%20%20%20moAttack.cityGateAsk()%3B%0A%20%20%20%7D%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="" title="收藏这段代码" style="color:rgb(0, 102, 153);text-decoration:underline;"><img class="star" src="09-IOC_files/0.8232101385308903.png" alt="收藏代码" style="border:0px;"></a></div></div><ol class="dp-j wiz-list-level1" style="font-size:1rem;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;color:rgb(43, 145, 175);background-color:rgb(255, 255, 255);"><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;"><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">class</span><span style="color:black;">&nbsp;Director&nbsp;{&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;">&nbsp;direct(){&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">//①指定角色的扮演者</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GeLi&nbsp;geli&nbsp;=&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">new</span><span style="color:black;">&nbsp;LiuDeHua();&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">//②注入具体扮演者到剧本中</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MoAttack&nbsp;moAttack&nbsp;=&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">new</span><span style="color:black;">&nbsp;MoAttack(geli);&nbsp;&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moAttack.cityGateAsk();&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">}&nbsp;&nbsp;</span></li></ol></div><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp; 在①处，导演安排刘德华饰演革离的角色，并在②处，将刘德华“注入”到墨攻的剧本中，然后开始“城门叩问”剧情的演出工作。<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><strong style="font-weight:bold;color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="font-size:1.125rem;">属性注入</span></strong><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);"><span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp; 有时，导演会发现，虽然革离是影片《墨攻》的第一主角，但并非每个场景都需要革离的出现，在这种情况下通过构造函数注入相当于每时每刻都在革离的饰演者在场，可见并不妥当，这时可以考虑使用属性注入。属性注入可以有选择地通过Setter方法完成调用类所需依赖的注入，更加灵活方便：<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">代码清单3-5&nbsp; MoAttack：通过Setter方法注入革离扮演者<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="dp-highlighter" style="font-family:Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Consolas, 'Courier New', monospace;font-size:1.125rem;width:678.991px;margin-left:9px;padding:1px;color:rgb(0, 0, 0);font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="bar"><div class="tools" style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码<span class="Apple-converted-space">&nbsp;</span><embed wmode="transparent" src="http://stamen.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=public%20class%20MoAttack%20%7B%0A%09private%20GeLi%20geli%3B%0A%20%20%20%20%20%2F%2F%E2%91%A0%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5%E6%96%B9%E6%B3%95%0A%09public%20void%20setGeli(GeLi%20geli)%20%7B%20%20%0A%09%09this.geli%20%3D%20geli%3B%0A%09%7D%0A%09public%20void%20cityGateAsk()%20%7B%0A%09%09geli.responseAsk(%22%E5%A2%A8%E8%80%85%E9%9D%A9%E7%A6%BB%22)%3B%0A%09%7D%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="" title="收藏这段代码" style="color:rgb(0, 102, 153);text-decoration:underline;"><img class="star" src="09-IOC_files/0.8542955221646051.png" alt="收藏代码" style="border:0px;"></a></div></div><ol class="dp-j wiz-list-level1" style="font-size:1rem;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;color:rgb(43, 145, 175);background-color:rgb(255, 255, 255);"><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;"><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">class</span><span style="color:black;">&nbsp;MoAttack&nbsp;{&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">private</span><span style="color:black;">&nbsp;GeLi&nbsp;geli;&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">//①属性注入方法</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;">&nbsp;setGeli(GeLi&nbsp;geli)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">this</span><span style="color:black;">.geli&nbsp;=&nbsp;geli;&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;">&nbsp;cityGateAsk()&nbsp;{&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;geli.responseAsk(<span class="string" style="color:blue;">"墨者革离"</span><span style="color:black;">);&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">}&nbsp;&nbsp;</span></li></ol></div><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp; MoAttack在①处为geli属性提供一个Setter方法，以便让导演在需要时注入geli的具体扮演者。<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">代码清单3-6&nbsp; Director：通过Setter方法注入革离扮演者<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="dp-highlighter" style="font-family:Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Consolas, 'Courier New', monospace;font-size:1.125rem;width:678.991px;margin-left:9px;padding:1px;color:rgb(0, 0, 0);font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="bar"><div class="tools" style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码<span class="Apple-converted-space">&nbsp;</span><embed wmode="transparent" src="http://stamen.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=public%20class%20Director%20%7B%0A%20%20%20public%20void%20direct()%7B%0A%09%20%20%20GeLi%20geli%20%3D%20new%20LiuDeHua()%3B%0A%09%20%20%20MoAttack%20moAttack%20%3D%20new%20MoAttack()%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%E2%91%A0%E8%B0%83%E7%94%A8%E5%B1%9E%E6%80%A7Setter%E6%96%B9%E6%B3%95%E6%B3%A8%E5%85%A5%0A%09%20%20%20moAttack.setGeli(geli)%3B%20%0A%09%20%20%20moAttack.cityGateAsk()%3B%0A%20%20%20%7D%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="" title="收藏这段代码" style="color:rgb(0, 102, 153);text-decoration:underline;"><img class="star" src="09-IOC_files/0.2038683914534698.png" alt="收藏代码" style="border:0px;"></a></div></div><ol class="dp-j wiz-list-level1" style="font-size:1rem;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;color:rgb(43, 145, 175);background-color:rgb(255, 255, 255);"><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;"><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">class</span><span style="color:black;">&nbsp;Director&nbsp;{&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;">&nbsp;direct(){&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GeLi&nbsp;geli&nbsp;=&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">new</span><span style="color:black;">&nbsp;LiuDeHua();&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MoAttack&nbsp;moAttack&nbsp;=&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">new</span><span style="color:black;">&nbsp;MoAttack();&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">//①调用属性Setter方法注入</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moAttack.setGeli(geli);&nbsp;&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moAttack.cityGateAsk();&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">}&nbsp;&nbsp;</span></li></ol></div><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp; 和通过构造函数注入革离扮演者不同，在实例化MoAttack剧本时，并未指定任何扮演者，而是在实例化MoAttack后，在需要革离出场时，才调用其setGeli()方法注入扮演者。按照类似的方式，我们还可以分别为剧本中其他诸如梁王、巷淹中等角色提供注入的Setter方法，这样，导演就可以根据所拍剧段的不同，注入相应的角色了。<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><strong style="font-weight:bold;color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="font-size:1.125rem;">接口注入</span></strong><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);"><span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp; 将调用类所有依赖注入的方法抽取到一个接口中，调用类通过实现该接口提供相应的注入方法。为了采取接口注入的方式，必须先声明一个ActorArrangable接口：<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="dp-highlighter" style="font-family:Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Consolas, 'Courier New', monospace;font-size:1.125rem;width:678.991px;margin-left:9px;padding:1px;color:rgb(0, 0, 0);font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="bar"><div class="tools" style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码<span class="Apple-converted-space">&nbsp;</span><embed wmode="transparent" src="http://stamen.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=public%20interface%20ActorArrangable%20%7B%0A%20%20%20void%20injectGeli(GeLi%20geli)%3B%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="" title="收藏这段代码" style="color:rgb(0, 102, 153);text-decoration:underline;"><img class="star" src="09-IOC_files/0.6196076341071362.png" alt="收藏代码" style="border:0px;"></a></div></div><ol class="dp-j wiz-list-level1" style="font-size:1rem;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;color:rgb(43, 145, 175);background-color:rgb(255, 255, 255);"><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;"><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">interface</span><span style="color:black;">&nbsp;ActorArrangable&nbsp;{&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;">&nbsp;injectGeli(GeLi&nbsp;geli);&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">}&nbsp;&nbsp;</span></li></ol></div><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp; 然后，MoAttack实现ActorArrangable接口提供具体的实现：<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">代码清单3-7&nbsp; MoAttack：通过接口方法注入革离扮演者<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="dp-highlighter" style="font-family:Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Consolas, 'Courier New', monospace;font-size:1.125rem;width:678.991px;margin-left:9px;padding:1px;color:rgb(0, 0, 0);font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="bar"><div class="tools" style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码<span class="Apple-converted-space">&nbsp;</span><embed wmode="transparent" src="http://stamen.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=public%20class%20MoAttack%20implements%20ActorArrangable%20%7B%0A%09private%20GeLi%20geli%3B%0A%20%20%20%20%20%2F%2F%E2%91%A0%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E6%96%B9%E6%B3%95%0A%09public%20void%20injectGeli%20(GeLi%20geli)%20%7B%20%20%0A%09%09this.geli%20%3D%20geli%3B%09%09%0A%09%7D%0A%09public%20void%20cityGateAsk()%20%7B%0A%09%09geli.responseAsk(%22%E5%A2%A8%E8%80%85%E9%9D%A9%E7%A6%BB%22)%3B%0A%09%7D%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="" title="收藏这段代码" style="color:rgb(0, 102, 153);text-decoration:underline;"><img class="star" src="09-IOC_files/0.40985357291544555.png" alt="收藏代码" style="border:0px;"></a></div></div><ol class="dp-j wiz-list-level1" style="font-size:1rem;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;color:rgb(43, 145, 175);background-color:rgb(255, 255, 255);"><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;"><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">class</span><span style="color:black;">&nbsp;MoAttack&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">implements</span><span style="color:black;">&nbsp;ActorArrangable&nbsp;{&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">private</span><span style="color:black;">&nbsp;GeLi&nbsp;geli;&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">//①实现接口方法</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;">&nbsp;injectGeli&nbsp;(GeLi&nbsp;geli)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">this</span><span style="color:black;">.geli&nbsp;=&nbsp;geli;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;">&nbsp;cityGateAsk()&nbsp;{&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;geli.responseAsk(<span class="string" style="color:blue;">"墨者革离"</span><span style="color:black;">);&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">}&nbsp;&nbsp;</span></li></ol></div><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp; Director通过ActorArrangable的injectGeli()方法完成扮演者的注入工作。<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">代码清单3-8&nbsp; Director：通过接口方法注入革离扮演者<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="dp-highlighter" style="font-family:Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Consolas, 'Courier New', monospace;font-size:1.125rem;width:678.991px;margin-left:9px;padding:1px;color:rgb(0, 0, 0);font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="bar"><div class="tools" style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Java代码<span class="Apple-converted-space">&nbsp;</span><embed wmode="transparent" src="http://stamen.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=public%20class%20Director%20%7B%0A%20%20%20public%20void%20direct()%7B%0A%09%20%20%20GeLi%20geli%20%3D%20new%20LiuDeHua()%3B%0A%09%20%20%20MoAttack%20moAttack%20%3D%20new%20MoAttack()%3B%0A%09%20%20%20moAttack.%20injectGeli%20(geli)%3B%0A%09%20%20%20moAttack.cityGateAsk()%3B%0A%20%20%20%7D%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="" title="收藏这段代码" style="color:rgb(0, 102, 153);text-decoration:underline;"><img class="star" src="09-IOC_files/0.8489565247641875.png" alt="收藏代码" style="border:0px;"></a></div></div><ol class="dp-j wiz-list-level1" style="font-size:1rem;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;color:rgb(43, 145, 175);background-color:rgb(255, 255, 255);"><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;"><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">class</span><span style="color:black;">&nbsp;Director&nbsp;{&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">public</span><span style="color:black;">&nbsp;</span><span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">void</span><span style="color:black;">&nbsp;direct(){&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GeLi&nbsp;geli&nbsp;=&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">new</span><span style="color:black;">&nbsp;LiuDeHua();&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MoAttack&nbsp;moAttack&nbsp;=&nbsp;<span class="keyword" style="color:rgb(127, 0, 85);font-weight:bold;">new</span><span style="color:black;">&nbsp;MoAttack();&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moAttack.&nbsp;injectGeli&nbsp;(geli);&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moAttack.cityGateAsk();&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">}&nbsp;&nbsp;</span></li></ol></div><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp; 由于通过接口注入需要额外声明一个接口，增加了类的数目，而且它的效果和属性注入并无本质区别，因此我们不提倡采用这种方式。<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><strong style="font-weight:bold;color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="font-size:1.5rem;">通过容器完成依赖关系的注入</span></strong><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);"><span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp; 虽然MoAttack和LiuDeHua实现了解耦，MoAttack无须关注角色实现类的实例化工作，但这些工作在代码中依然存在，只是转移到Director类中而已。假设某一制片人想改变这一局面，在选择某个剧本后，希望通过一个“海选”或者第三中介机构来选择导演、演员，让他们各司其职，那剧本、导演、演员就都实现解耦了。<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp; 所谓媒体“海选”和第三方中介机构在程序领域即是一个第三方的容器，它帮助完成类的初始化与装配工作，让开发者从这些底层实现类的实例化、依赖关系装配等工作中脱离出来，专注于更有意义的业务逻辑开发工作。这无疑是一件令人向往的事情，Spring就是这样的一个容器，它通过配置文件或注解描述类和类之间的依赖关系，自动完成类的初始化和依赖注入的工作。下面是Spring配置文件的对以上实例进行配置的配置文件片断：<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="dp-highlighter" style="font-family:Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Consolas, 'Courier New', monospace;font-size:1.125rem;width:678.991px;margin-left:9px;padding:1px;color:rgb(0, 0, 0);font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><div class="bar"><div class="tools" style="padding:3px;text-align:left;margin:0px;color:black;font-weight:bold;">Xml代码<span class="Apple-converted-space">&nbsp;</span><embed wmode="transparent" src="http://stamen.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20%3F%3E%0A%3Cbeans%20xmlns%3D%22http%3A%2F%2Fwww.springframework.org%2Fschema%2Fbeans%22%0A%09xmlns%3Axsi%3D%22http%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema-instance%22%0A%09xmlns%3Ap%3D%22http%3A%2F%2Fwww.springframework.org%2Fschema%2Fp%22%0A%09xsi%3AschemaLocation%3D%22http%3A%2F%2Fwww.springframework.org%2Fschema%2Fbeans%20%0A%20%20%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Fbeans%2Fspring-beans-3.0.xsd%22%3E%0A%20%20%20%20%20%20%20%20%3C!--%E2%91%A0%E5%AE%9E%E7%8E%B0%E7%B1%BB%E5%AE%9E%E4%BE%8B%E5%8C%96--%3E%0A%20%20%20%3Cbean%20id%3D%22geli%22%20class%3D%22LiuDeHua%22%2F%3E%0A%20%20%20%3Cbean%20id%3D%22moAttack%22%20class%3D%22com.baobaotao.ioc.MoAttack%22%20%0A%20%20%20%20%20%20%20%20%20p%3Ageli-ref%3D%22geli%22%2F%3E%3C!--%E2%91%A1%E9%80%9A%E8%BF%87geli-ref%E5%BB%BA%E7%AB%8B%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB--%3E%0A%3C%2Fbeans%3E" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="" title="收藏这段代码" style="color:rgb(0, 102, 153);text-decoration:underline;"><img class="star" src="09-IOC_files/0.5159401228053515.png" alt="收藏代码" style="border:0px;"></a></div></div><ol class="dp-xml wiz-list-level1" style="font-size:1rem;margin:0px 0px 1px;padding:2px 0px;border:1px solid rgb(209, 215, 220);list-style:decimal;color:rgb(43, 145, 175);background-color:rgb(255, 255, 255);"><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;"><span class="tag" style="color:rgb(0, 102, 153);font-weight:bold;">&lt;?</span><span class="tag-name" style="color:rgb(0, 102, 153);font-weight:bold;">xml</span><span style="color:black;">&nbsp;</span><span class="attribute" style="color:red;">version</span><span style="color:black;">=</span><span class="attribute-value" style="color:blue;">"1.0"</span><span style="color:black;">&nbsp;</span><span class="attribute" style="color:red;">encoding</span><span style="color:black;">=</span><span class="attribute-value" style="color:blue;">"UTF-8"</span><span style="color:black;">&nbsp;</span><span class="tag" style="color:rgb(0, 102, 153);font-weight:bold;">?&gt;</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;"><span class="tag" style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span class="tag-name" style="color:rgb(0, 102, 153);font-weight:bold;">beans</span><span style="color:black;">&nbsp;</span><span class="attribute" style="color:red;">xmlns</span><span style="color:black;">=</span><span class="attribute-value" style="color:blue;">"http://www.springframework.org/schema/beans"</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="color:red;">xmlns:xsi</span><span style="color:black;">=</span><span class="attribute-value" style="color:blue;">"http://www.w3.org/2001/XMLSchema-instance"</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="color:red;">xmlns:p</span><span style="color:black;">=</span><span class="attribute-value" style="color:blue;">"http://www.springframework.org/schema/p"</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="color:red;">xsi:schemaLocation</span><span style="color:black;">="http://www.springframework.org/schema/beans&nbsp;&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"<span class="tag" style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comments" style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">&lt;!--①实现类实例化--&gt;</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;<span class="tag" style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span class="tag-name" style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:black;">&nbsp;</span><span class="attribute" style="color:red;">id</span><span style="color:black;">=</span><span class="attribute-value" style="color:blue;">"geli"</span><span style="color:black;">&nbsp;</span><span class="attribute" style="color:red;">class</span><span style="color:black;">=</span><span class="attribute-value" style="color:blue;">"LiuDeHua"</span><span class="tag" style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;<span class="tag" style="color:rgb(0, 102, 153);font-weight:bold;">&lt;</span><span class="tag-name" style="color:rgb(0, 102, 153);font-weight:bold;">bean</span><span style="color:black;">&nbsp;</span><span class="attribute" style="color:red;">id</span><span style="color:black;">=</span><span class="attribute-value" style="color:blue;">"moAttack"</span><span style="color:black;">&nbsp;</span><span class="attribute" style="color:red;">class</span><span style="color:black;">=</span><span class="attribute-value" style="color:blue;">"com.baobaotao.ioc.MoAttack"</span><span style="color:black;">&nbsp;&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute" style="color:red;">p:geli-ref</span><span style="color:black;">=</span><span class="attribute-value" style="color:blue;">"geli"</span><span class="tag" style="color:rgb(0, 102, 153);font-weight:bold;">/&gt;</span><span class="comments" style="color:rgb(0, 130, 0);padding:0px;margin:0px;width:auto;border:0px;">&lt;!--②通过geli-ref建立依赖关系--&gt;</span><span style="color:black;">&nbsp;&nbsp;</span></span></li><li style="font-size:1rem;margin:0px 0px 0px 38px;padding:0px 0px 0px 10px;border-left-width:1px;border-left-style:solid;border-left-color:rgb(209, 215, 220);background-color:rgb(250, 250, 250);"><span style="color:black;"><span class="tag" style="color:rgb(0, 102, 153);font-weight:bold;">&lt;/</span><span class="tag-name" style="color:rgb(0, 102, 153);font-weight:bold;">beans</span><span class="tag" style="color:rgb(0, 102, 153);font-weight:bold;">&gt;</span><span style="color:black;">&nbsp;&nbsp;</span></span></li></ol></div><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp; 通过new XmlBeanFactory(“beans.xml”)等方式即可启动容器。在容器启动时，Spring根据配置文件的描述信息，自动实例化Bean并完成依赖关系的装配，从容器中即可返回准备就绪的Bean实例，后续可直接使用之。<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><span style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;display:inline !important;background-color:rgb(255, 255, 255);">&nbsp;&nbsp; Spring为什么会有这种“神奇”的力量，仅凭一个简单的配置文件，就能魔法般地实例化并装配好程序所用的Bean呢？这种“神奇”的力量归功于Java语言本身的类反射功能。<span class="Apple-converted-space">&nbsp;</span></span><br style="color:rgb(0, 0, 0);font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:1.312rem;font-style:normal;font-weight:normal;text-align:left;text-indent:0px;background-color:rgb(255, 255, 255);"><br><div style="color:gray;"><small>来源：&nbsp;<a href="http://stamen.iteye.com/blog/1489223/">http://stamen.iteye.com/blog/1489223/</a></small></div><br></div></body></html>